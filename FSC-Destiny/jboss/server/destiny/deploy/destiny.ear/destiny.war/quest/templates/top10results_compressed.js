Class.create(BaseController,{init:function(){var a=Registry.lookup("Top10Controller.Load");a.hideLoading();var b=Registry.lookup("HoverMasterController.HoverMaster");this.hoverGroup=b.createGroup({name:this.name,data:this.data.records,activatorContainer:this.container,hoverContainer:$("content-outer"),controllerURL:this.data.hoverControllerURL,templateURL:this.data.hoverTemplateURL,openDelay:0.5,closeDelay:0.1,onShow:function(){$("content-outer").addClassName("high-zindex");$("top10").addClassName("high-zindex")},onHide:function(){$("content-outer").removeClassName("high-zindex");$("top10").removeClassName("high-zindex")}})},registerEvents:function(){this.elementMap.get(Top10Controller_DIV_TOP10_ITEM_PREFIX+"0").addClassName("top10ItemSelected");var a=0;var b=this;var c=Registry.lookup("TitleDetailsController.Master");this.data.records.each(function(d){Event.observe("top10Item_"+a,"mouseover",b.mouseOverTop10Item.bindAsEventListener(b));Event.observe("top10Item_"+a,"mouseout",b.mouseOutTop10Item.bindAsEventListener(b));
Event.observe("top10Item_"+a,"mousedown",b.top10MouseDownItemListener.bindAsEventListener(b));b.addDraggable(CoverImageTemplate_DIV_TITLE_IMAGE_PREFIX+a,d.bibID,null,"top10");var e=c.loadTitleDetails.curry(d.bibID,null);Event.observe(b.elementMap.get(CoverImageTemplate_DIV_COVER_IMAGE_PREFIX+a),"click",e);Event.observe(b.elementMap.get(HitListRecordTemplate_DIV_TITLE_PREFIX+a),"click",e);a++})},mouseOverTop10Item:function(e){var a=Event.element(e).getAttribute("value");var b=Utility.downToClass(this.elementMap.get(Top10Controller_DIV_TOP10_ITEMS),Top10Controller_CLASS_TOP10_ITEM_SELECTED).readAttribute("value");var c=this.elementMap.get(Top10Controller_DIV_TOP10_COVER_PREFIX+a);var d=this.elementMap.get(Top10Controller_CLASS_TOP10_ITEM+"_"+a);if(b!=a&&c){this.elementMap.get(Top10Controller_DIV_TOP10_COVER_PREFIX+b).hide();c.show();d.addClassName(Top10Controller_CLASS_TOP10_ITEM_HIGHLIGHTED)}},mouseOutTop10Item:function(e){var a=Event.element(e).getAttribute("value");var b=Utility.downToClass(this.elementMap.get(Top10Controller_DIV_TOP10_ITEMS),Top10Controller_CLASS_TOP10_ITEM_SELECTED).readAttribute("value");
var c=this.elementMap.get(Top10Controller_DIV_TOP10_COVER_PREFIX+a);var d=this.elementMap.get(Top10Controller_CLASS_TOP10_ITEM+"_"+a);if(b!=a&&c){this.elementMap.get(Top10Controller_DIV_TOP10_COVER_PREFIX+b).show();c.hide();d.removeClassName(Top10Controller_CLASS_TOP10_ITEM_HIGHLIGHTED)}},top10MouseDownItemListener:function(c){var d=Event.element(c);var a=this.elementMap.get(Top10Controller_DIV_TOP10_ITEMS);if(!d.hasClassName("top10ItemInactive")){var b=Utility.downToClass(a,"top10ItemSelected").readAttribute("value");var e=d.readAttribute("value");this.elementMap.get(Top10Controller_DIV_TOP10_ITEM_PREFIX+b).removeClassName("top10ItemSelected");this.elementMap.get(Top10Controller_DIV_TOP10_COVER_PREFIX+b).hide();this.elementMap.get(Top10Controller_DIV_TOP10_COVER_PREFIX+e).show();this.elementMap.get(Top10Controller_DIV_TOP10_ITEM_PREFIX+e).removeClassName("top10ItemHighlighted");this.elementMap.get(Top10Controller_DIV_TOP10_ITEM_PREFIX+e).addClassName("top10ItemSelected")}},updateSearchResults:function(IDs,key,value,propertyToUpdate){var records=this.data.records;
for(var j=0;j<records.length;j++){var record=records[j];if(IDs&&IDs.indexOf(eval("record."+key))>=0){record[propertyToUpdate]=value}}}});