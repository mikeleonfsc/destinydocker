Class.create(BaseController,{init:function(){this.type=this.data.type+"";if(!this.data.readyToDisplay){this.reloadLimiters()}else{switch(this.type){case LimiterController_LIMITER_TYPE_GENRE:case LimiterController_LIMITER_TYPE_SUBJECT:case LimiterController_LIMITER_TYPE_AUTHOR:case LimiterController_LIMITER_TYPE_SERIES:case LimiterController_LIMITER_TYPE_LANGUAGE:case LimiterController_LIMITER_TYPE_AWARD:case LimiterController_LIMITER_TYPE_LOCATION:case LimiterController_LIMITER_TYPE_WPE_DOMAIN:case LimiterController_LIMITER_TYPE_WPE_FORMAT_TYPE:case LimiterController_LIMITER_TYPE_WPE_SOURCE_TYPE:case LimiterController_LIMITER_TYPE_WPE_TOPIC:case LimiterController_LIMITER_TYPE_WPE_LANGUAGE:case LimiterController_LIMITER_TYPE_FORMAT:if(!this.hasNextPage()){this.elementMap.get(LimiterController_DIV_LIMITER_CONTROLS_NEXT).setStyle("visibility: hidden")}if(!this.hasPreviousPage()){this.elementMap.get(LimiterController_DIV_LIMITER_CONTROLS_PREV).setStyle("visibility: hidden")}break;case LimiterController_LIMITER_TYPE_AR:case LimiterController_LIMITER_TYPE_RC:var b=(this.type==LimiterController_LIMITER_TYPE_AR)?LimiterController_LIMITER_CONTROL_AR_READING_LEVEL:LimiterController_LIMITER_CONTROL_RC_READING_LEVEL;
var a=(this.type==LimiterController_LIMITER_TYPE_AR)?LimiterController_LIMITER_CONTROL_AR_POINTS:LimiterController_LIMITER_CONTROL_RC_POINTS;this.readingLevelSlider=new this.LimiterSlider(this.data.readingLevelRange,b);this.pointSlider=new this.LimiterSlider(this.data.pointsRange,a);this.readingLevelSlider.setSibling(this.pointSlider);this.pointSlider.setSibling(this.readingLevelSlider);break;case LimiterController_LIMITER_TYPE_LEXILE:if(this.data.measureRange){this.measureSlider=new this.LimiterSlider(this.data.measureRange,LimiterController_LIMITER_CONTROL_LEXILE_MEASURE);this.measureSlider.setSibling(this.elementMap.get(LimiterController_LIMITER_CONTROL_LEXILE_CODE))}break;case LimiterController_LIMITER_TYPE_INTEREST_LEVEL:this.interestLevelSlider=new this.LimiterSlider(this.data.interestLevelRange,LimiterController_LIMITER_CONTROL_INTEREST_LEVEL);break;case LimiterController_LIMITER_TYPE_READING_LEVEL:this.readingLevelSlider=new this.LimiterSlider(this.data.readingLevelRange,LimiterController_LIMITER_CONTROL_READING_LEVEL);
break;case LimiterController_LIMITER_TYPE_PUB_YEAR:this.pubYearSlider=new this.LimiterSlider(this.data.pubYearRange,LimiterController_LIMITER_CONTROL_PUB_YEAR);break;case LimiterController_LIMITER_TYPE_PAGES:this.extentPagesSlider=new this.LimiterSlider(this.data.pagesRange,LimiterController_LIMITER_CONTROL_PAGES);break;case LimiterController_LIMITER_TYPE_MINUTES:this.extentMinutesSlider=new this.LimiterSlider(this.data.minutesRange,LimiterController_LIMITER_CONTROL_MINUTES);break;case LimiterController_LIMITER_TYPE_FP:this.fountasPinnellSlider=new this.LimiterSlider(this.data.fountasPinnellRange,LimiterController_LIMITER_CONTROL_FP_LEVEL);break;case LimiterController_LIMITER_TYPE_WPE_LEXILE:this.wpeLexileSlider=new this.LimiterSlider(this.data.wpeLexileRange,LimiterController_LIMITER_CONTROL_WPE_LEXILE);break}}},registerEvents:function(){Event.observe(this.elementMap.get(LimiterController_LIMITER_CLOSE),"mousedown",this.closeHover.bind(this));if(this.data.readyToDisplay){switch(this.type){case LimiterController_LIMITER_TYPE_SUBJECT:this.registerPagedLimiterEvents();
for(var b=0;b<this.data.pageData.length;b++){var d=this.data.pageData[b];var c=this.applySubjectLimiter.bind(this,d.value.vopacHeadingID,d.value.subjectDisplayable);Event.observe(this.elementMap.get(LimiterController_LI_LIMITER_ROW_PREFIX+b),"mousedown",c)}break;case LimiterController_LIMITER_TYPE_GENRE:this.registerPagedLimiterEvents();for(var b=0;b<this.data.pageData.length;b++){var d=this.data.pageData[b];var c=this.applyGenreLimiter.bind(this,d.value.vopacHeadingID,d.value.subjectDisplayable);Event.observe(this.elementMap.get(LimiterController_LI_LIMITER_ROW_PREFIX+b),"mousedown",c)}break;case LimiterController_LIMITER_TYPE_AUTHOR:this.registerPagedLimiterEvents();for(var b=0;b<this.data.pageData.length;b++){var d=this.data.pageData[b];var c=this.applyAuthorLimiter.bind(this,d.value.stringCode,d.value.stringDesc);Event.observe(this.elementMap.get(LimiterController_LI_LIMITER_ROW_PREFIX+b),"mousedown",c)}break;case LimiterController_LIMITER_TYPE_SERIES:this.registerPagedLimiterEvents();
for(var b=0;b<this.data.pageData.length;b++){var d=this.data.pageData[b];var c=this.applySeriesLimiter.bind(this,d.value.stringCode,d.value.stringDesc);Event.observe(this.elementMap.get(LimiterController_LI_LIMITER_ROW_PREFIX+b),"mousedown",c)}break;case LimiterController_LIMITER_TYPE_LOCATION:this.registerPagingControls();var a=0;for(var b=0;b<this.data.pageData.length;b++){a++;var d=this.data.pageData[b];if(d.value.siteID){if(this.data.pageNumber>0&&b==0){a++}var c=this.applyLocationLimiter.bind(this,d.value.siteID,d.value.siteNameDisplayable);Event.observe(this.elementMap.get(LimiterController_LI_LIMITER_ROW_PREFIX+a),"mousedown",c)}}break;case LimiterController_LIMITER_TYPE_LANGUAGE:this.registerPagedLimiterEvents();for(var b=0;b<this.data.pageData.length;b++){var d=this.data.pageData[b];var c=this.applyLanguageLimiter.bind(this,d.value.stringCode,d.value.stringDesc);Event.observe(this.elementMap.get(LimiterController_LI_LIMITER_ROW_PREFIX+b),"mousedown",c)}break;case LimiterController_LIMITER_TYPE_AWARD:this.registerPagedLimiterEvents();
for(var b=0;b<this.data.pageData.length;b++){var a=b+1;var d=this.data.pageData[b];var c=this.applyAwardLimiter.bind(this,this.data.awardGroupHeading,d.value.longID,d.value.stringDesc);Event.observe(this.elementMap.get(LimiterController_LI_LIMITER_ROW_PREFIX+a),"mousedown",c)}break;case LimiterController_LIMITER_TYPE_REVIEW:for(var b=0;b<this.data.reviewData.values.length;b++){var d=this.data.reviewData.values[b];var c=this.applyReviewLimiter.bind(this,d.value);Event.observe(this.elementMap.get(LimiterController_LI_LIMITER_ROW_PREFIX+b),"mousedown",c)}break;case LimiterController_LIMITER_TYPE_WPE_GRADE_LEVEL:console.log("attempting to bind the grade level to its hover");for(var b=0;b<this.data.pageData.length;b++){var d=this.data.pageData[b];var c=this.applyWPEGradeLevelLimiter.bind(this,d.value.stringCode);Event.observe(this.elementMap.get(LimiterController_LI_LIMITER_ROW_PREFIX+b),"mousedown",c);console.log("binding complete")}break;case LimiterController_LIMITER_TYPE_WPE_DOMAIN:console.log("attempting to bind GRADE LEVEL...");
this.registerPagedLimiterEvents();for(var b=0;b<this.data.pageData.length;b++){var d=this.data.pageData[b];var c=this.applyWPEDomainLimiter.bind(this,d.value);Event.observe(this.elementMap.get(LimiterController_LI_LIMITER_ROW_PREFIX+b),"mousedown",c);console.log("binding complete")}break;case LimiterController_LIMITER_TYPE_WPE_TOPIC:console.log("attempting to bind TOPIC...");this.registerPagedLimiterEvents();for(var b=0;b<this.data.pageData.length;b++){var d=this.data.pageData[b];var c=this.applyWPETopicLimiter.bind(this,d.value.stringDesc);Event.observe(this.elementMap.get(LimiterController_LI_LIMITER_ROW_PREFIX+b),"mousedown",c);console.log("binding complete")}break;case LimiterController_LIMITER_TYPE_WPE_LANGUAGE:console.log("attempting to bind LANGUAGE...");this.registerPagedLimiterEvents();for(var b=0;b<this.data.pageData.length;b++){var d=this.data.pageData[b];var c=this.applyWPELanguageLimiter.bind(this,d.value.stringDesc);console.log("got here");Event.observe(this.elementMap.get(LimiterController_LI_LIMITER_ROW_PREFIX+b),"mousedown",c);
console.log("binding complete")}break;case LimiterController_LIMITER_TYPE_WPE_LEXILE:console.log("attempting to bind WPE Lexile...");var c=this.applyWPELexileLimiter.bind(this);Event.observe(this.elementMap.get(LimiterController_BUTTON_APPLY_LIMITER),"mousedown",c);break;case LimiterController_LIMITER_TYPE_WPE_FORMAT_TYPE:console.log("attempting to bind FORMAT TYPE...");this.registerPagedLimiterEvents();for(var b=0;b<this.data.pageData.length;b++){var d=this.data.pageData[b];var c=this.applyWPEFormatTypeLimiter.bind(this,d.value);Event.observe(this.elementMap.get(LimiterController_LI_LIMITER_ROW_PREFIX+b),"mousedown",c);console.log("binding complete")}break;case LimiterController_LIMITER_TYPE_WPE_SOURCE_TYPE:console.log("attempting to bind SOURCE TYPE...");this.registerPagedLimiterEvents();for(var b=0;b<this.data.pageData.length;b++){var d=this.data.pageData[b];var c=this.applyWPESourceTypeLimiter.bind(this,d.value);Event.observe(this.elementMap.get(LimiterController_LI_LIMITER_ROW_PREFIX+b),"mousedown",c);
console.log("binding complete")}break;case LimiterController_LIMITER_TYPE_AR:case LimiterController_LIMITER_TYPE_RC:var c=this.applyReadingProgramLimiter.bind(this,this.type);Event.observe(this.elementMap.get(LimiterController_BUTTON_APPLY_LIMITER),"mousedown",c);break;case LimiterController_LIMITER_TYPE_LEXILE:var c=this.applyLexileLimiter.bind(this);Event.observe(this.elementMap.get(LimiterController_BUTTON_APPLY_LIMITER),"mousedown",c);if(Object.isElement(this.elementMap.get(LimiterController_LIMITER_CONTROL_LEXILE_CODE))){Event.observe(this.elementMap.get(LimiterController_LIMITER_CONTROL_LEXILE_CODE),"change",this.updateLexileCodeCounts.bind(this))}break;case LimiterController_LIMITER_TYPE_INTEREST_LEVEL:var c=this.applyInterestLevelLimiter.bind(this);Event.observe(this.elementMap.get(LimiterController_BUTTON_APPLY_LIMITER),"mousedown",c);break;case LimiterController_LIMITER_TYPE_READING_LEVEL:var c=this.applyReadingLevelLimiter.bind(this);Event.observe(this.elementMap.get(LimiterController_BUTTON_APPLY_LIMITER),"mousedown",c);
break;case LimiterController_LIMITER_TYPE_PUB_YEAR:var c=this.applyPubYearLimiter.bind(this);Event.observe(this.elementMap.get(LimiterController_BUTTON_APPLY_LIMITER),"mousedown",c);break;case LimiterController_LIMITER_TYPE_PAGES:var c=this.applyExtentPagesLimiter.bind(this);Event.observe(this.elementMap.get(LimiterController_BUTTON_APPLY_LIMITER),"mousedown",c);break;case LimiterController_LIMITER_TYPE_MINUTES:var c=this.applyExtentMinutesLimiter.bind(this);Event.observe(this.elementMap.get(LimiterController_BUTTON_APPLY_LIMITER),"mousedown",c);break;case LimiterController_LIMITER_TYPE_FP:var c=this.applyFountasPinnellLimiter.bind(this);Event.observe(this.elementMap.get(LimiterController_BUTTON_APPLY_LIMITER),"mousedown",c);break;case LimiterController_LIMITER_TYPE_ONE_SEARCH_DATABASE:var c=this.applyOneSearchLimiter.bind(this);Event.observe(this.elementMap.get(LimiterController_BUTTON_APPLY_LIMITER),"mousedown",c);break;case LimiterController_LIMITER_TYPE_DIGITAL_CONTENT_PROVIDER:var c=this.applyDigitalResourceLimiter.bind(this);
Event.observe(this.elementMap.get(LimiterController_BUTTON_APPLY_LIMITER),"mousedown",c);break;case LimiterController_LIMITER_TYPE_FORMAT:this.registerPagedLimiterEvents();for(var b=0;b<this.data.pageData.length;b++){var a=b+1;var d=this.data.pageData[b];var c=this.applyFormatLimiter.bind(this,d.value.longID,this.data.formatGroupHeading,d.value.stringDesc);Event.observe(this.elementMap.get(LimiterController_LI_LIMITER_ROW_PREFIX+a),"mousedown",c)}break}}},registerPagedLimiterEvents:function(){var a=this.updateSort.bind(this);if(this.data.pageData.length>1){(this.data.currentSort!=LimiterController_NARROWING_SORT_ALPHA)&&Event.observe(this.elementMap.get(LimiterController_LINK_NARROWING_SORT_ALPHA),"mousedown",a.curry(LimiterController_NARROWING_SORT_ALPHA));(this.data.currentSort!=LimiterController_NARROWING_SORT_REVERSE_ALPHA)&&Event.observe(this.elementMap.get(LimiterController_LINK_NARROWING_SORT_REVERSE_ALPHA),"mousedown",a.curry(LimiterController_NARROWING_SORT_REVERSE_ALPHA));(this.data.currentSort!=LimiterController_NARROWING_SORT_MOST_HITS)&&Event.observe(this.elementMap.get(LimiterController_LINK_NARROWING_SORT_MOST_HITS),"mousedown",a.curry(LimiterController_NARROWING_SORT_MOST_HITS))
}this.registerPagingControls()},registerPagingControls:function(){Event.observe(this.elementMap.get(LimiterController_LINK_LIMITER_CONTROLS_PREV),"mousedown",this.previousPage.bind(this));Event.observe(this.elementMap.get(LimiterController_LINK_LIMITER_CONTROLS_NEXT),"mousedown",this.nextPage.bind(this))},reloadLimiters:function(){var b=Registry.lookup("SearchTypeController.Selector");if(!DAO.load({endpoint:"LimiterController.Limiters",container:$(LimiterController_DIV_LIMITER_OUTER)},this.data.type,null,b.getSearchType())){var a=this.reloadLimiters.bind(this);a.delay(0.5)}},updateSort:function(b){var a=Registry.lookup("SearchTypeController.Selector");DAO.load({endpoint:"LimiterController.Limiters",container:$(LimiterController_DIV_LIMITER_OUTER)},null,b,a.getSearchType())},closeHover:function(){if(this.hover&&Object.isFunction(this.hover.close)){this.hover.close()}},prepareForRefresh:function(){var a=Registry.lookup("SearchController.SearchMaster");a.prepareForRefresh();if(this.hover&&Object.isFunction(this.hover.close)){this.hover.close()
}Registry.unregister("LimiterController.Limiters")},prepareForRefresh_OneSearch:function(){var a=Registry.lookup("OneSearchController.SearchMaster");a.prepareForRefresh();if(this.hover&&Object.isFunction(this.hover.close)){this.hover.close()}Registry.unregister("LimiterController.Limiters")},prepareForRefresh_DCPI:function(){var a=Registry.lookup("SearchController.SearchMaster");a.prepareForRefresh_DCPI();if(this.hover&&Object.isFunction(this.hover.close)){this.hover.close()}Registry.unregister("LimiterController.Limiters")},applyAuthorLimiter:function(a,b){if(DAO.load({endpoint:"LimiterController.AuthorApplicator",appendTo:"SearchController.SearchResults"},a,b)){this.prepareForRefresh()}},applySeriesLimiter:function(b,a){if(DAO.load({endpoint:"LimiterController.SeriesApplicator",appendTo:"SearchController.SearchResults"},b,a)){this.prepareForRefresh()}},applyLocationLimiter:function(a,b){if(DAO.load({endpoint:"LimiterController.LocationApplicator",appendTo:"SearchController.SearchResults"},a,b)){this.prepareForRefresh()
}},applyLanguageLimiter:function(b,a){if(DAO.load({endpoint:"LimiterController.LanguageApplicator",appendTo:"SearchController.SearchResults"},b,a)){this.prepareForRefresh()}},applyAwardLimiter:function(b,c,a){if(DAO.load({endpoint:"LimiterController.AwardsApplicator",appendTo:"SearchController.SearchResults"},b,c,a)){this.prepareForRefresh()}},applySubjectLimiter:function(b,a){if(DAO.load({endpoint:"LimiterController.SubjectApplicator",appendTo:"SearchController.SearchResults"},b,a)){this.prepareForRefresh()}},applyGenreLimiter:function(b,a){if(DAO.load({endpoint:"LimiterController.GenreApplicator",appendTo:"SearchController.SearchResults"},b,a)){this.prepareForRefresh()}},applyReviewLimiter:function(a){if(DAO.load({endpoint:"LimiterController.ReviewsApplicator",appendTo:"SearchController.SearchResults"},a)){this.prepareForRefresh()}},applyWPEGradeLevelLimiter:function(a){if(DAO.load({endpoint:"LimiterController.WPEGradeLevelApplicator",appendTo:"SearchController.SearchResults"},a)){this.prepareForRefresh()
}},applyWPEDomainLimiter:function(a){if(DAO.load({endpoint:"LimiterController.WPEDomainApplicator",appendTo:"SearchController.SearchResults"},a)){this.prepareForRefresh()}},applyWPEFormatTypeLimiter:function(a){if(DAO.load({endpoint:"LimiterController.WPEFormatTypeApplicator",appendTo:"SearchController.SearchResults"},a)){this.prepareForRefresh()}},applyWPESourceTypeLimiter:function(a){if(DAO.load({endpoint:"LimiterController.WPESourceTypeApplicator",appendTo:"SearchController.SearchResults"},a)){this.prepareForRefresh()}},applyWPETopicLimiter:function(a){if(DAO.load({endpoint:"LimiterController.WPETopicApplicator",appendTo:"SearchController.SearchResults"},a)){this.prepareForRefresh()}},applyWPELanguageLimiter:function(a){if(DAO.load({endpoint:"LimiterController.WPELanguageApplicator",appendTo:"SearchController.SearchResults"},a)){this.prepareForRefresh()}},applyWPELexileLimiter:function(c){var a="";var b="";if(this.wpeLexileSlider){a=this.wpeLexileSlider.getLowHandleValue();b=this.wpeLexileSlider.getHighHandleValue()
}if(DAO.load({endpoint:"LimiterController.WPELexileApplicator",appendTo:"SearchController.SearchResults"},a,b)){this.prepareForRefresh()}},applyInterestLevelLimiter:function(){var b="";var a="";if(this.interestLevelSlider){b=this.interestLevelSlider.getLowHandleValue();a=this.interestLevelSlider.getHighHandleValue()}if(DAO.load({endpoint:"LimiterController.InterestLevelApplicator",appendTo:"SearchController.SearchResults"},b,a)){this.prepareForRefresh()}},applyReadingLevelLimiter:function(){var a="";var b="";if(this.readingLevelSlider){a=this.readingLevelSlider.getLowHandleValue();b=this.readingLevelSlider.getHighHandleValue()}if(DAO.load({endpoint:"LimiterController.ReadingLevelApplicator",appendTo:"SearchController.SearchResults"},a,b)){this.prepareForRefresh()}},applyPubYearLimiter:function(){var a="";var b="";if(this.pubYearSlider){a=this.pubYearSlider.getLowHandleValue();b=this.pubYearSlider.getHighHandleValue()}if(DAO.load({endpoint:"LimiterController.PubYearApplicator",appendTo:"SearchController.SearchResults"},a,b)){this.prepareForRefresh()
}},applyExtentPagesLimiter:function(){var a="";var b="";if(this.extentPagesSlider){a=this.extentPagesSlider.getLowHandleValue();b=this.extentPagesSlider.getHighHandleValue()}if(DAO.load({endpoint:"LimiterController.ExtentPagesApplicator",appendTo:"SearchController.SearchResults"},a,b)){this.prepareForRefresh()}},applyExtentMinutesLimiter:function(){var b="";var a="";if(this.extentMinutesSlider){b=this.extentMinutesSlider.getLowHandleValue();a=this.extentMinutesSlider.getHighHandleValue()}if(DAO.load({endpoint:"LimiterController.ExtentMinutesApplicator",appendTo:"SearchController.SearchResults"},b,a)){this.prepareForRefresh()}},applyFountasPinnellLimiter:function(){var a="";var b="";if(this.fountasPinnellSlider){a=this.fountasPinnellSlider.getLowHandleValue();b=this.fountasPinnellSlider.getHighHandleValue()}if(DAO.load({endpoint:"LimiterController.FountasPinnellApplicator",appendTo:"SearchController.SearchResults"},a,b)){this.prepareForRefresh()}},applyOneSearchLimiter:function(){var d=this.data.title;
var c=[];for(var b=0;b<this.data.databases.length;b++){var a=$("os"+this.data.databases[b].groupNumber+"_db"+b);if(a.checked){c.push(a.name)}}if(DAO.load({endpoint:"LimiterController.OneSearchApplicator",appendTo:"OneSearchController.SearchResults"},d,c)){this.prepareForRefresh_OneSearch()}},applyDigitalResourceLimiter:function(){var c=[];for(var b=0;b<this.data.providers.length;b++){var a=$("dcpi_"+b);if(a.checked){c.push(a.name)}}if(DAO.load({endpoint:"LimiterController.DcpiSearchApplicator",appendTo:"DCPISearchController.SearchResults"},c,c.length==0)){this.prepareForRefresh_DCPI()}},applyLexileLimiter:function(){var b="";var a="";var c="";if(this.measureSlider){b=this.measureSlider.getLowHandleValue();a=this.measureSlider.getHighHandleValue()}var d=this.elementMap.get(LimiterController_LIMITER_CONTROL_LEXILE_CODE);if(Object.isElement(d)){c=d.getValue().split(".")[0]}if(DAO.load({endpoint:"LimiterController.LexileApplicator",appendTo:"SearchController.SearchResults"},c,b,a)){this.prepareForRefresh()
}},applyFormatLimiter:function(a,c,b){if(c){if(DAO.load({endpoint:"LimiterController.FormatApplicator",appendTo:"SearchController.SearchResults"},null,a,b)){this.prepareForRefresh()}}else{if(DAO.load({endpoint:"LimiterController.FormatApplicator",appendTo:"SearchController.SearchResults"},a,null,b)){this.prepareForRefresh()}}},updateLexileCodeCounts:function(){if(this.measureSlider&&Object.isFunction(this.measureSlider.disableSelf)){this.measureSlider.disableSelf()}var b=this.elementMap.get(LimiterController_DIV_TOTAL_COUNT);var a=this.elementMap.get(LimiterController_LIMITER_CONTROL_LEXILE_CODE);if(Object.isElement(b)&&Object.isElement(a)&&Object.isFunction(a.getValue)){b.update(a.getValue().split(".")[1])}},applyReadingProgramLimiter:function(e){var d=null;var f=null;if(this.readingLevelSlider){d=this.readingLevelSlider.getLowHandleValue();f=this.readingLevelSlider.getHighHandleValue()}var c=null;var a=null;if(this.pointSlider){c=this.pointSlider.getLowHandleValue();a=this.pointSlider.getHighHandleValue()
}var b=(e==LimiterController_LIMITER_TYPE_AR)?"LimiterController.ARApplicator":"LimiterController.RCApplicator";if(DAO.load({endpoint:b,appendTo:"SearchController.SearchResults"},d,f,c,a)){this.prepareForRefresh()}},setPosition:function(f){if(!f.visible()){f.setStyle({visibility:"hidden"});f.show()}var o=this.activator.positionedOffset();var h=this.activator.getWidth();var d=this.activator.getHeight();var g=$("narrowingLimiters");var i=g.getWidth();var j=f.cumulativeOffset();var l=$(window.isRTL?"narrowFilterModuleArrowRight":"narrowFilterModuleArrowLeft");var m=l.cumulativeOffset();var e=m.top-(l.getHeight()/2)-j.top;var k=0+(l.getWidth()/2);var n=o.top-e;var c=f.getWidth();var a=f.getHeight();var b={position:"absolute",top:n+"px",left:k+"px",zIndex:1000,visibility:"inherit"};if(window.isRTL){b.right=b.left;b.left=null}f.setStyle(b)},LimiterSlider:Class.create(Control.Slider,{initialize:function($super,b,a){if(!Object.isFunction(String.prototype.parseInt)){String.prototype.parseFloat=function(){return parseFloat(this)
}}var d=[a+LimiterController_LIMITER_SLIDER_LOW_HANDLE,a+LimiterController_LIMITER_SLIDER_HIGH_HANDLE];var e=a;var g={id:a,restricted:true,sliderValue:[b.numericMinimum,b.numericMaximum],range:$R(parseFloat(b.numericMinimum),parseFloat(b.numericMaximum),false),myValues:b.valuesArray.invoke("parseFloat"),valueCounts:b.valueCountsArray.invoke("parseFloat"),translationArray:b.translationArray,forceDecimal:b.forceDecimal,rangedValueCounts:b.rangedValueCounts};var h=Object.extend({id:null,valueCounts:null,onSlide:this.handleSlide.bind(this),onChange:this.handleChange.bind(this),translationArray:null,forceDecimal:false},g);if($(e)){if(g.myValues.length>1){var f=Utility.upToClass($(h.id),"hover");if(f){f.setStyle("visibility: hidden");f.show()}$super(d,e,h);if(f){f.hide()}for(var c=0;c<this.handles.length;c++){this.handles[c].addClassName("enabledSliderHandle")}this.background=Utility.upToClass(this.track,"sliderBackground");this.background.addClassName("enabledSliderBackground");this.sliderValueLow=$(this.options.id+"SliderValueLow");
this.sliderValueHigh=$(this.options.id+"SliderValueHigh")}else{this.options=g}}},getLowNumericValue:function(){var a=this.options.myValues[0];if(this.options.myValues.length>1){a=(this.options.forceDecimal)?this.values[0].toFixed(1):this.values[0].toFixed(0)}return a},getHighNumericValue:function(){var a=this.options.myValues[0];if(this.options.myValues.length>1){a=(this.options.forceDecimal)?this.values[1].toFixed(1):this.values[1].toFixed(0)}return a},getLowHandleValue:function(){return this.translateValue(this.getLowNumericValue())},getHighHandleValue:function(){return this.translateValue(this.getHighNumericValue())},translateValue:function(a){var b=a;if(this.options.translationArray){b=this.options.translationArray[a]}return b},updateValueCountsTotal:function(){var c=0;if(this.options.myValues.length==1){c=this.options.valueCounts[0]}else{var b=(this.options.forceDecimal)?this.values[0].toFixed(1):this.values[0].toFixed(0);var e=(this.options.forceDecimal)?this.values[1].toFixed(1):this.values[1].toFixed(0);
if(this.options.rangedValueCounts){var d=this.options.rangedValueCounts;for(var a=0;a<d.length;a++){if(d[a].min<=e&&d[a].max>=b){c+=d[a].count}}}else{for(var a=0;a<this.options.myValues.length;a++){if(this.options.myValues[a]>=b&&this.options.myValues[a]<=e){c+=this.options.valueCounts[a]}}}}if(!this.totalCountDiv){this.totalCountDiv=$("totalCount")}if(this.totalCountDiv){this.totalCountDiv.innerHTML=c}},showSliderValue:function(){if(this.activeHandle){var b=this.getHighHandleValue();var a=this.sliderValueHigh;if(this.activeHandle==this.handles[0]){b=this.getLowHandleValue();a=this.sliderValueLow}if(this.options.forceDecimal&&Object.isNumber(b)&&(b==b.floor())){b=b+".0"}a.update(b)}},setSibling:function(a){this.sibling=a},disableSiblings:function(){if(!this.siblingsDisabled){if(this.sibling){if(Object.isFunction(this.sibling.disableSelf)){this.sibling.disableSelf()}else{if(Object.isElement(this.sibling)&&Object.isFunction(this.sibling.disable)){this.sibling.disable()}}}this.siblingsDisabled=true
}},disableSelf:function(){this.disabled=true;if(this.options.myValues.length>1){for(var a=0;a<this.handles.length;a++){this.handles[a].removeClassName("enabledSliderHandle");this.handles[a].addClassName("disabledSliderHandle")}this.background.removeClassName("enabledSliderBackground");this.background.addClassName("disabledSliderBackground")}},handleSlide:function(a){this.disableSiblings();this.updateValueCountsTotal();this.showSliderValue()},handleChange:function(a){this.disableSiblings();this.updateValueCountsTotal();this.showSliderValue()},maximumOffset:function(){return this.isVertical()?$j(this.track).height():$j(this.track).width()}})});