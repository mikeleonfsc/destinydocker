Class.create(BaseController,{init:function(){this.refreshFooter();this.records=[];for(x=0;x<this.pagedData.length;x++){var b=this.pagedData[x];for(i=0;i<b.data.dateGroups.length;i++){var c=b.data.dateGroups[i];for(j=0;j<c.items.length;j++){var d=c.items[j];this.records.push(d)}}}this.shelfSelect=new ShelfSelect({id:MyQuestUpdatesController_DIV_MYQUEST_UPDATES_RESULTS});var e=Registry.lookup("HoverMasterController.HoverMaster");this.hoverGroup=e.createGroup({name:this.name,data:this.records,activatorContainer:this.container,hoverContainer:$("content-outer"),controllerURL:this.data.hoverControllerURL,templateURL:this.data.hoverTemplateURL,openDelay:0.5,closeDelay:0.1,onShow:function(m,l){var h=m.up("#myQuestMainContent");if(Object.isElement(h)){var g=h.select(".high-zindex");if(Object.isArray(g)){for(i=0;i<g.length;i++){if(Object.isElement(g[i])){g[i].removeClassName("high-zindex")}}}}var f=m.up(".myQuestItem");if(Object.isElement(f)){f.addClassName("high-zindex")}var k=m.up("."+MyQuestController_CLASS_MYQUEST_DATE_GROUP);
if(Object.isElement(k)){k.addClassName("high-zindex")}$("content-outer").addClassName("high-zindex")},onHide:function(k,h){var f=k.up(".myQuestItem");if(Object.isElement(f)){f.removeClassName("high-zindex")}var g=k.up("."+MyQuestController_CLASS_MYQUEST_DATE_GROUP);if(Object.isElement(g)){g.removeClassName("high-zindex")}$("content-outer").removeClassName("high-zindex")}});var a=Registry.lookup("MyQuestUpdatesController.Loader");a.enableOnLoading()},registerEvents:function(){var b=this.pagedData[this.pagedData.length-1];for(i=0;i<b.data.dateGroups.length;i++){var e=b.data.dateGroups[i];for(j=0;j<e.items.length;j++){var d=e.items[j];var c=$("titleDetailLink_"+d.auditID);var f=Registry.lookup("TitleDetailsController.Master");var a=f.loadTitleDetails.bind(f,d.bibID,null);if(c){Event.observe("titleDetailLink_"+d.auditID,"mousedown",a)}}}},refreshFooter:function(){if($(MyQuestUpdatesController_ID_MYQUEST_OLDER_RESULTS_LINK)){if(!this.pagedData[this.pagedData.length-1].nextPage){$(MyQuestUpdatesController_ID_MYQUEST_OLDER_RESULTS_LINK).hide()
}else{$(MyQuestUpdatesController_ID_MYQUEST_OLDER_RESULTS_LINK).show()}}},dataAppended:function(a){$(this.container).insert({bottom:this.template.render(this.pagedData[a])});this.init();this.registerEvents()},truncateResults:function(a){this._truncateInternalData(a);this._truncateDOMElements(a)},getLastAuditIDForDateGroup:function(a){var c=$("myQuestUpdatesResults").select(".myQuestDateGroupElement a");var b=null;for(var e=0;e<c.length;e++){var d=c[e];if(d&&d.identify()==a){b=d.readAttribute("lastAuditID");if(b=="0"){b=null}}}return b},_truncateDOMElements:function(a){var d=$("myQuestUpdatesResults").childElements();var e=false;for(var c=0;c<d.length;c++){if(d[c].hasClassName("myQuestDateGroupElement")){var b=d[c].firstDescendant();if(b&&b.identify()==a){e=true}}if(e){d[c].remove()}}},_truncateInternalData:function(c){var b=-1;var a=[];for(var g=0;g<this.pagedData.length&&b==-1;g++){var f=this.pagedData[g].data.dateGroups;for(var e=0;e<f.length;e++){if(f[e].dateGroupID==c){b=e;break}}var d=[];
if(b>=0){for(var e=0;e<b;e++){d[e]=f[e]}this.pagedData[g].data.dateGroups=d}a[g]=this.pagedData[g]}this.pagedData=a},getLastAuditID:function(){return this.pagedData[this.pagedData.length-1].lastAuditID},getLastDateGroupIdx:function(){var a=this.pagedData[this.pagedData.length-1].data.dateGroups;var b=-1;if(a&&a.length>0){b=a[a.length-1].dateGroupID}return b},getLastDateString:function(){var a=this.pagedData[this.pagedData.length-1].data.dateGroups;var b="";if(a&&a.length>0){b=a[a.length-1].dateString}return b},updateResults:function(IDs,key,value,propertyToUpdate){var records=this.records;for(var j=0;j<records.length;j++){var record=records[j];if(IDs.indexOf(eval("record."+key))>=0){record[propertyToUpdate]=value}}}});