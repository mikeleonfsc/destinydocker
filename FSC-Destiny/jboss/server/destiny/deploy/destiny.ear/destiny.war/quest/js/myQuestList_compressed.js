Class.create({initialize:function(a){this.options=Object.extend({resultsDivID:null,rowClass:"myQuestFriendsItem",showDateGroups:true,todayStr:null,emptyStr:null,todayGroupHeaderStr:null},a);this.results=$(this.options.resultsDivID);this.results.show()},removeRow:function(a,d,h){var g=$$("."+this.options.rowClass+"[rowid="+a+"]")[0];var i=g;if(g){if(d){var e=g.cloneNode(true);e.down(".column3").innerHTML='<p class="myQuestRowMessage">'+d+"</p>";var f=g.previous();if(f){Element.insert(f,{after:e})}else{f=g.up();Element.insert(f,{top:e})}g.remove();var b=function(){i=this._removeRowFromDOM(e);if(h){h(g)}};var c=function(){if(e&&(e.up(".myQuestDateGroup")||e.up(".myQuestUpdatesResultsClass"))){Effect.BlindUp(e,{duration:0.5,afterFinish:b.bind(this)})}else{if(h){h(g)}}};window.setTimeout(c.bind(this),3000)}else{var b=function(){i=this._removeRowFromDOM(g);if(h){h(i)}};Effect.BlindUp(g.id,{duration:0.5,afterFinish:b.bind(this)})}}return i},_removeRowFromDOM:function(b){if((b.previous()!=null&&b.previous().hasClassName("activityDateStamp"))&&(b.next()==undefined||!b.next().hasClassName("myQuestItem"))){var a=b.previous();
if(a.previous()!=null&&a.previous().hasClassName("myQuestDateGroupElement")&&(b.next()==undefined||b.next().hasClassName("myQuestDateGroupElement"))){a.previous().remove()}b.previous().remove()}if(b.up(".myQuestDateGroup")&&b.up(".myQuestDateGroup").childElements().length==1&&document.getElementById("myQuestEarlierPostControlLink")==null){b.up(".myQuestDateGroup").insert('<span class="noDataMessage">'+this.options.emptyStr+"</span>")}return b.remove()},addRow:function(b){var c=b.getAttribute("rowid");var d=$$("."+this.options.rowClass+"[rowid="+c+"]")[0];if(!d){if(this.results.down().down().hasClassName("noDataMessage")){this.results.down().down().remove()}if(this.options.showDateGroups){if(this.results.down().down()==null||this.results.down().down().down().innerHTML!=MessageHelper.format("myQuestController_today")){var a=Builder.node("p",{"class":"activityDateStamp"},[Builder.node("span",{"class":"dateStampContext"},MessageHelper.format("myQuestController_today")),Builder.node("em",{"class":"dateStampFormatted"},this.options.todayStr)]);
Element.insert(this.results.down(),{top:a})}Element.insert(this.results.down().down(),{after:b})}else{Element.insert(this.results.down(),{top:b})}Effect.BlindDown(b.id,{duration:0.5})}}});