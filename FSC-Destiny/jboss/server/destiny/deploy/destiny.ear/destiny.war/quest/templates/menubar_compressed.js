Class.create(BaseController,{init:function(){var b=this.elementMap.get(MenuBarController_DIV_MENU_BAR);if(this.data.showVisualSearchToggle){this.elementMap.get(MenuBarController_LI_MENU_SEARCH_VISUAL).addClassName("last")}else{this.elementMap.get(MenuBarController_LI_MENU_SEARCH_ADVANCED).addClassName("last")}var a=Registry.lookup("HoverMasterController.HoverMaster");this.hoverGroup=a.createGroup({name:this.name,data:[this.data.themes],activatorContainer:this.container,hoverContainer:this.elementMap.get(MenuBarController_DIV_MENU_BAR),controllerURL:this.data.themeControllerURL,templateURL:this.data.themeTemplateURL,activateEvent:"mousedown",openDelay:0.1,closeDelay:0.5,contentContainer:MenuBarController_DIV_CHANGE_THEME_WINDOW,onShow:function(){b.addClassName("high-zindex")},onHide:function(){b.removeClassName("high-zindex")},showEffect:function(c){new Effect.BlindDown(c,{duration:0.25})},hideEffect:function(c,d){new Effect.BlindUp(c,{duration:0.25,afterFinish:function(){d.hide()}})}});
this.setViewMode(MenuBarController_VIEW_MODE_WIDGET)},registerEvents:function(){if(this.data.showHelpMenuLink){Event.observe(this.elementMap.get("questHelp"),"mousedown",this.openHelpWindow.curry("ContextLevelHelpWindow","http://destinyhelp.fsc.follett.com/content/c_quest.htm?sessid="+this.data.sessionID+"&key="+encodeURIComponent(this.data.helpKey),1000,500))}if(!this.data.userLoggedIn){Event.observe(this.elementMap.get("loginLink"),"click",this.showQuestLogin.bind(this))}if(this.data.showMyInfoLink){Event.observe(this.elementMap.get(MenuBarController_ANCHOR_VIEW_MY_INFO),"mousedown",this.showMyInfo.bind(this))}if(this.elementMap.get("createAccountLink")){Event.observe(this.elementMap.get("createAccountLink"),"click",this.showCreateAccount.bind(this))}Event.observe(this.elementMap.get(MenuBarController_ANCHOR_ADVANCED_SEARCH_LINK),"mousedown",this.showAdvancedSearch.bind(this))},showAdvancedSearch:function(){this.modalId="advancedSearchModalContainer";var b={id:this.modalId,zIndex:"50000",hideOnOutsideClick:"true"};
var a=new ModalDialog(b);DAO.load({endpoint:"AdvancedSearchController.Window",modal:a})},openHelpWindow:function(c,b,d,a){var e=window.open(b,c,"width="+d+",height="+a+",resizable,scrollbars,menubar");if(e){e.focus()}},createModal:function(){this.modalId=SearchBoxController_DIV_LOGIN_MODULE_OUTER;this.modalContentDivId="loginContent";var a={width:"",id:this.modalId,zIndex:"50000",contentDivId:this.modalContentDivId,hideOnOutsideClick:"true"};return new ModalDialog(a)},showQuestLogin:function(){var a=this.createModal();DAO.load({endpoint:"LoginController.LoginDialog",modal:a})},showMyInfo:function(){var b={width:"",id:ResourceListController_DIV_RESOURCE_LIST_WINDOW,zIndex:"10000",hideOnOutsideClick:"true"};var a=new ModalDialog(b);if(this.data.canViewOwnStatus){DAO.load({endpoint:"ResourceListController.Master",modal:a},null,"MyInfo",false)}else{if(this.data.canAccessBookList){DAO.load({endpoint:"ResourceListController.Master",modal:a},null,"ResourceList",false)}else{DAO.load({endpoint:"ResourceListController.Master",modal:a},null,"Recommendations",false)
}}},showCreateAccount:function(){var a=this.createModal();DAO.load({endpoint:"CreateAccountController.CreateAccountDialog",modal:a},false)},setViewMode:function(a){this.viewMode=a},getViewMode:function(){return this.viewMode}});