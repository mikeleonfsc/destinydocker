Class.create(BaseController,{init:function(){this.modal.show();this.conversationID=this.data.conversationID;this.recommendationID=this.data.recommendationID;var a=this.elementMap.get(ReportAbuseController_FIELD_ADD_REPORT_ABUSE_TEXT);a.focus()},registerEvents:function(){Event.observe(this.elementMap.get(ReportAbuseController_BUTTON_REPORT_ABUSE_CLOSE),"mousedown",this.closeDialog.bind(this));Event.observe(this.elementMap.get(ReportAbuseController_BUTTON_REPORT_ABUSE_SAVE),"click",this._saveAction.bind(this));Event.observe(this.elementMap.get(ReportAbuseController_FIELD_ADD_REPORT_ABUSE_TEXT),"keyup",this.addReportAbuseNoteAsYouTypeListener.bindAsEventListener(this))},closeDialog:function(){this.modal.closeDialog()},_saveAction:function(b,d,a){var c=this.conversationID;var f=this.recommendationID;var e=this.elementMap.get(ReportAbuseController_FIELD_ADD_REPORT_ABUSE_TEXT).value;if(Object.isElement(this.elementMap.get(ReportAbuseController_BUTTON_REPORT_ABUSE_SAVE))){this.elementMap.get(ReportAbuseController_BUTTON_REPORT_ABUSE_SAVE).disable()
}DAO.load({endpoint:"ReportAbuseController.Saver"},c,f,e)},addReportAbuseNoteAsYouTypeListener:function(b){var c=Event.element(b);if(c.hasClassName("myQuestAddReportAbuseNoteBox")){var d=Utility.upToClass(c,"genericModuleContent");var a=Utility.downToClass(d,"myQuestAddReportAbuseNoteCharValue");if(c.value.length>2048){c.value=c.value.substring(0,2048)}if(c.value.length>2028){a.addClassName("warnCharLeft")}if(c.value.length<=2028&&a.hasClassName("warnCharLeft")){a.removeClassName("warnCharLeft")}a.innerHTML=2048-c.value.length}}});