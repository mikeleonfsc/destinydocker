Class.create(BaseController,{init:function(){if(this.data.results.length>1){this.elementMap.get(BooklistSelectController_SPAN_BOOK_LIST_SELECT).show();if($(OneSearchController_ONE_SEARCH_BOOK_LIST_SELECTION)){$(OneSearchController_ONE_SEARCH_BOOK_LIST_SELECTION).show()}}else{if($(OneSearchController_ONE_SEARCH_BOOK_LIST_SELECTION)){$(OneSearchController_ONE_SEARCH_BOOK_LIST_SELECTION).hide()}}},registerEvents:function(){if(Object.isElement(this.elementMap.get(BooklistSelectController_PARAM_SELECTED_LIST))){Event.observe(this.elementMap.get(BooklistSelectController_PARAM_SELECTED_LIST),"change",this.selectBooklist.bind(this))}},selectBooklist:function(){var v=this.elementMap.get(BooklistSelectController_PARAM_SELECTED_LIST);var t=Registry.lookup("BooklistWidgetController.Load");var p=Registry.lookup("SearchTypeController.Selector");var A=Registry.lookup("BooklistSelectController.Widget");var f=Registry.lookup("BooklistSelectController.TitleDetails");var O=Registry.lookup("BooklistSelectController.ResourceList");
var o;var d;var ab;var M;var Q;var H;var r;var L;var k;var Y;var I;var S;var ac;var m;var E;var aa;var T;var C;var Z;var N;var u;var z;var e;var b;if(t&&A&&Object.isElement(v)){if(DAO.load({endpoint:"BooklistWidgetController.Updater",container:null},p.getSearchType(),v.getValue())){A.setBooklistValue(v.getValue());o=v.getValue();if(O){O.setBooklistValue(o)}if(f){f.setBooklistValue(o)}}}var x=Registry.lookup("TitleDetailsController.TitleDetails");if(x){d=x.data.bibID}var J=Registry.lookup("TitleDetailsController.DCPITitleDetails");if(J){ab=J.data.bibID;M=J.data.dcpiRecordGUID}var a=Registry.lookup("OneSearchController.DatabaseDetail");if(a){L=a.data.dbRecID}var g=Registry.lookup("ResourceListController.Master");if(g){k=g.listType}var U=Registry.lookup("ResourceListController.MyInfo");if(U){Y=this.populateResourceListIDs(U)}var G=Registry.lookup("ResourceListController.Holds");if(G){I=this.populateResourceListIDs(G)}var l=Registry.lookup("ResourceListController.Recommendations");if(l){S=this.populateResourceListIDs(l)
}var D=Registry.lookup("SearchController.SearchResults");if(D){this.populateSearchResultIDs(D,false);E=this.titlesBibArray;aa=this.wpeObject}var q=Registry.lookup("DCPISearchController.SearchResults");if(q){this.populateSearchResultIDs(q,true);ac=this.dcpiBibArray;m=this.dcpiGUIDArray}var s=Registry.lookup("Top10Controller.Top10");if(s){var K=s.data.records;var n=new Array();var W=0;if(Object.isArray(K)){for(var R=0;R<K.length;R++){if(K[R].bibID){n[W]=K[R].bibID;W++}}}T=n}var V=Registry.lookup("NewArrivalsController.Contents");if(V){var h=V.pagedData;var n=new Array();var W=0;if(Object.isArray(h)){for(var R=0;R<h.length;R++){var K=h[R].recList;if(Object.isArray(K)){for(var P=0;P<K.length;P++){if(K[P].bibID){n[W]=K[P].bibID;W++}}}}}C=n}var B=Registry.lookup("MyQuestShelfController.Loader");if(B){var K=B.records;var n=new Array();var W=0;if(Object.isArray(K)){for(var R=0;R<K.length;R++){if(K[R].bibID){n[W]=K[R].bibID;W++}}}N=n}var w=Registry.lookup("TitleDetailsController.Suggestions");if(w){var h=w.pagedData;
var n=new Array();var W=0;if(Object.isArray(h)){for(var R=0;R<h.length;R++){var K=h[R].recList;if(Object.isArray(K)){for(var P=0;P<K.length;P++){if(K[P].bibID){n[W]=K[P].bibID;W++}}}}}Z=n}var y=Registry.lookup("MyQuestInboxController.Loader");if(y){var K=y.records;var n=new Array();var W=0;if(Object.isArray(K)){for(var R=0;R<K.length;R++){if(K[R].bibID){n[W]=K[R].bibID;W++}}}u=n}var X=Registry.lookup("MyQuestUpdatesController.OlderLoader");if(X){var K=X.records;var n=new Array();var W=0;if(Object.isArray(K)){for(var R=0;R<K.length;R++){if(K[R].bibID){n[W]=K[R].bibID;W++}}}z=n}var c=$(HoverMasterController_DIV_TITLE_HOVER_IN_BOOKLIST);if(c){if($(HoverMasterController_DIV_TITLE_HOVER_WPE_ANCHOR)){e=$(HoverMasterController_DIV_TITLE_HOVER_WPE_ANCHOR).innerText;b=$(HoverMasterController_DIV_TITLE_HOVER_WPE_ANCHOR).getAttribute("href")}else{var ad=$("titleHoverModuleInner").getAttribute("type");var F=$("titleHoverModuleInner").getAttribute("itemID");if(F&&ad){switch(ad){case"bibID":Q=F;break;
case"dcpiBibID":H=F;break;case"dcpiRecordGUID":r=F;break}}}}DAO.load({endpoint:"BooklistSelectController.ChangeList",container:null},o,d,ab,M,Q,H,r,L,k,Y,I,S,ac,m,E,Object.toJSON(aa),T,C,N,u,z,Z,e,b)},setBooklistValue:function(a){if(Object.isElement(this.elementMap.get(BooklistSelectController_PARAM_SELECTED_LIST))&&a){this.elementMap.get(BooklistSelectController_PARAM_SELECTED_LIST).setValue(a)}},populateSearchResultIDs:function(f,a){var o=f.pagedData;var h=new Array();var n=new Array();var k=new Object();var d=new Array();var g=0;var l=0;var m=0;if(Object.isArray(o)){for(var e=0;e<o.length;e++){if(o[e].wpeHitList){var b=o[e].wpeHitList.records;if(Object.isArray(b)){for(var c=0;c<b.length;c++){d[m]=new Object();d[m].url=b[c].element.url;d[m].title=b[c].element.title;d[m].recID=b[c].recID;m++}}}else{if(o[e].hitList){var b=o[e].hitList.records;if(Object.isArray(b)){for(var c=0;c<b.length;c++){if(b[c].bibID){h[g]=b[c].bibID;g++}else{n[l]=b[c].dcpiRecordGUID;l++}}}}}}}if(a){this.dcpiBibArray=h;
this.dcpiGUIDArray=n}else{if(h&&h.length>0){this.titlesBibArray=h}else{this.wpeObject=new Object();this.wpeObject.results=d}}},populateResourceListIDs:function(c){var b=c.pagedData;var a=new Array();var h=0;if(Object.isArray(b)){for(var g=0;g<b.length;g++){var e=b[g].hitList.records;if(Object.isArray(e)){for(var f=0;f<e.length;f++){var d=null;if(e[f].bibID){a[h]=e[f].bibID;h++}}}}}return a}});