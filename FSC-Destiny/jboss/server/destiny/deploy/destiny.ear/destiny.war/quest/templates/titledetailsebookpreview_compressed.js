Class.create(BaseController,{init:function(){if(this.data.url){this.elementMap.get(TitleDetailsController_DIV_PREVIEW_EBOOK_PASSWORD_INNER).hide();this.launchPreview(this.data.url);var a=Registry.lookup("TitleDetailsController.TitleDetails");a.showPreviewEBookButton();this.closeDialog()}else{this.modal.show();this.focusPassword()}},registerEvents:function(){if(!this.data.url){Event.observe(this.elementMap.get(TitleDetailsController_BUTTON_PREVIEW_EBOOK_PASSWORD_SAVE),"click",this.previewEBook.bind(this));Event.observe(this.elementMap.get(TitleDetailsController_BUTTON_PREVIEW_EBOOK_PASSWORD_CLOSE),"mousedown",this.closeDialog.bind(this))}},closeDialog:function(){this.modal.closeDialog()},previewEBook:function(){this.elementMap.get(TitleDetailsController_BUTTON_PREVIEW_EBOOK_PASSWORD_SAVE).disabled=true;var b=this.elementMap.get(TitleDetailsController_FIELD_PREVIEW_EBOOK_PASSWORD).getValue();var a=DAO.load({endpoint:"TitleDetailsController.PreviewEBookPasswordSaver"},b,this.data.bibID);if(!a){this.elementMap.get(TitleDetailsController_BUTTON_PREVIEW_EBOOK_PASSWORD_SAVE).disabled=false
}},showPreviewEBookPasswordErrors:function(a){this.elementMap.get(TitleDetailsController_DIV_PREVIEW_EBOOK_PASSWORD_ERRORS).update(a);this.elementMap.get(TitleDetailsController_DIV_PREVIEW_EBOOK_PASSWORD_ERRORS).show();this.elementMap.get(TitleDetailsController_BUTTON_PREVIEW_EBOOK_PASSWORD_SAVE).disabled=false;this.elementMap.get(TitleDetailsController_BUTTON_PREVIEW_EBOOK_PASSWORD_SAVE).blur();this.focusPassword()},launchPreview:function(a){window.open(a,"previewEbook")},focusPassword:function(){this.elementMap.get(TitleDetailsController_FIELD_PREVIEW_EBOOK_PASSWORD).activate()}});