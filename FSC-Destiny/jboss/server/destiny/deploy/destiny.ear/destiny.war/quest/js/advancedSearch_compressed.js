Class.create({initialize:function(){},init:function(a){if(a){this.json_data=a.data;this.controller=a}this._buildElement();this.allLines=[];this.exactLines=[];this.anyLines=[];this.notAnyLines=[];this.limiters=[];this.addAllLine();this.addExactLine();this.addAnyLine();this.addNotAnyLine();this.addLimiter();this.refreshDialog()},_buildElement:function(){this.element=Builder.node("div",{id:"advSearch-FilterWrapper"});var d=Builder.node("p",{"class":"column column-3"});var e=Builder.node("div",{"class":"advSearch-FilterRow"},[Builder.node("p",{"class":"column column-1"}),Builder.node("p",{"class":"column column-2"}),d]);var c=Builder.node("a",{id:"advSearch-ResetForm","class":"advSearch-ResetForm",href:"#",alt:MessageHelper.format("advancedSearchDataValue_resetAdvancedSearch"),title:MessageHelper.format("advancedSearchDataValue_resetAdvancedSearch")},[Builder.node("em",{},MessageHelper.format("advancedSearchDataValue_reset"))]);d.insert(c);this.element.insert(e);this.errorDiv=Builder.node("h1",{id:"advancedSearchErrors",style:"display: none;"});
this.element.insert(this.errorDiv);var a=Builder.node("h2",{},MessageHelper.format("advancedSearchDataValue_showMeEverythingThatHas"));this.element.insert(a);this.allLineWrapper=Builder.node("div",{"class":"advSearch-Group"+AdvancedSearchController_AS_LINE_TYPE_ALL});this.element.insert(this.allLineWrapper);this.exactLineWrapper=Builder.node("div",{"class":"advSearch-Group"+AdvancedSearchController_AS_LINE_TYPE_EXACT});this.element.insert(this.exactLineWrapper);this.anyLineWrapper=Builder.node("div",{"class":"advSearch-Group"+AdvancedSearchController_AS_LINE_TYPE_ANY});this.element.insert(this.anyLineWrapper);var f=Builder.node("h2",{},MessageHelper.format("advancedSearchDataValue_butIDontWant"));this.element.insert(f);this.notAnyLineWrapper=Builder.node("div",{"class":"advSearch-Group"+AdvancedSearchController_AS_LINE_TYPE_NOT});this.element.insert(this.notAnyLineWrapper);var b=Builder.node("h2",{},MessageHelper.format("advancedSearchDataValue_limitMySearchTo"));this.element.insert(b);
this.limiterWrapper=Builder.node("div",{"class":"advSearch-Group"+AdvancedSearchController_AS_LINE_TYPE_LIMITER});this.element.insert(this.limiterWrapper)},getElement:function(){return this.element},getQueryString:function(c){var a="";if(!c){c=AdvancedSearchController_AS_QUERY_OUTPUT_SEARCH}for(var b=0;b<this.allLines.size();b++){a=this._addToQueryString(a,this.allLines[b].getQueryString(c))}for(var b=0;b<this.exactLines.size();b++){a=this._addToQueryString(a,this.exactLines[b].getQueryString(c))}for(var b=0;b<this.anyLines.size();b++){a=this._addToQueryString(a,this.anyLines[b].getQueryString(c))}for(var b=0;b<this.notAnyLines.size();b++){a=this._addToQueryString(a,this.notAnyLines[b].getQueryString(c))}for(var b=0;b<this.limiters.size();b++){a=this._addToQueryString(a,this.limiters[b].getQueryString(c))}if(a.empty()&&c==AdvancedSearchController_AS_QUERY_OUTPUT_HIGHLIGHTED){a=MessageHelper.format("advancedSearchDataValue_asYouUseTheOptionsBelow")}return a},truncateEmptyRows:function(){var b=this.allLines;
for(var a=0;a<b.size();a++){if(b[a].getQueryString().empty()&&this.allLines.size()>1){b[a].getElement().remove();this.allLines=this.allLines.without(b[a])}}var b=this.exactLines;for(var a=0;a<b.size();a++){if(b[a].getQueryString().empty()&&this.exactLines.size()>1){b[a].getElement().remove();this.exactLines=this.exactLines.without(b[a])}}var b=this.anyLines;for(var a=0;a<b.size();a++){if(b[a].getQueryString().empty()&&this.anyLines.size()>1){b[a].getElement().remove();this.anyLines=this.anyLines.without(b[a])}}var b=this.notAnyLines;for(var a=0;a<b.size();a++){if(b[a].getQueryString().empty()&&this.notAnyLines.size()>1){b[a].getElement().remove();this.notAnyLines=this.notAnyLines.without(b[a])}}var b=this.limiters;for(var a=0;a<b.size();a++){if(b[a].getType()==AdvancedSearchController_AS_LIMITER_CHOOSE&&this.limiters.size()>1){b[a].getElement().remove();this.limiters=this.limiters.without(b[a])}}this.refreshDialog()},refreshDialog:function(){var a=100;for(var b=0;b<this.allLines.size();
b++){a=this.allLines[b].setTabOrder(a);if(b==this.allLines.size()-1){this.allLines[b].showAddRow()}else{this.allLines[b].hideAddRow()}}for(var b=0;b<this.exactLines.size();b++){a=this.exactLines[b].setTabOrder(a);if(b==this.exactLines.size()-1){this.exactLines[b].showAddRow()}else{this.exactLines[b].hideAddRow()}}for(var b=0;b<this.anyLines.size();b++){a=this.anyLines[b].setTabOrder(a);if(b==this.anyLines.size()-1){this.anyLines[b].showAddRow()}else{this.anyLines[b].hideAddRow()}}for(var b=0;b<this.notAnyLines.size();b++){a=this.notAnyLines[b].setTabOrder(a);if(b==this.notAnyLines.size()-1){this.notAnyLines[b].showAddRow()}else{this.notAnyLines[b].hideAddRow()}}for(var b=0;b<this.limiters.size();b++){this.limiters[b].updateTypes();a=this.limiters[b].setTabOrder(a);if(b==this.limiters.size()-1&&this.limiters[b].getNumberOfTypeOptions()>2){this.limiters[b].showAddRow()}else{this.limiters[b].hideAddRow()}}},canSearchWithOnlyTheseLimiters:function(){var a=false;for(var b=0;b<this.limiters.size();
b++){switch(this.limiters[b].getType()){case AdvancedSearchController_AS_LIMITER_AR:case AdvancedSearchController_AS_LIMITER_RC:if(this.limiters[b].getValue()!=null){a=true}break;default:break}}return a},_addToQueryString:function(b,a){if(!a.empty()){if(!b.empty()){b+=" "}b+=a}return b},fireUpdateEvent:function(b){var a;if(b&&b.type=="keyup"){a=true}this.doUpdate(a)},addLine:function(a){switch(a){case AdvancedSearchController_AS_LINE_TYPE_ALL:this.addAllLine();break;case AdvancedSearchController_AS_LINE_TYPE_EXACT:this.addExactLine();break;case AdvancedSearchController_AS_LINE_TYPE_ANY:this.addAnyLine();break;case AdvancedSearchController_AS_LINE_TYPE_NOT:this.addNotAnyLine();break;case AdvancedSearchController_AS_LINE_TYPE_LIMITER:this.addLimiter();break;default:}this.refreshDialog()},removeLine:function(b,a){switch(a){case AdvancedSearchController_AS_LINE_TYPE_ALL:this.allLines=this._removeLine(b,this.allLines,a);if(this.allLines.size()==0){this.addAllLine()}break;case AdvancedSearchController_AS_LINE_TYPE_EXACT:this.exactLines=this._removeLine(b,this.exactLines,a);
if(this.exactLines.size()==0){this.addExactLine()}break;case AdvancedSearchController_AS_LINE_TYPE_ANY:this.anyLines=this._removeLine(b,this.anyLines,a);if(this.anyLines.size()==0){this.addAnyLine()}break;case AdvancedSearchController_AS_LINE_TYPE_NOT:this.notAnyLines=this._removeLine(b,this.notAnyLines,a);if(this.notAnyLines.size()==0){this.addNotAnyLine()}break;case AdvancedSearchController_AS_LINE_TYPE_LIMITER:this.limiters=this._removeLine(b,this.limiters,a);if(this.limiters.size()==0){this.addLimiter()}break;default:}this.fireUpdateEvent();this.refreshDialog()},hasLimiter:function(b){var a=false;for(var c=0;c<this.limiters.length;c++){if(this.limiters[c].getType()==b){a=true;break}}return a},_removeLine:function(f,a,d){var e;for(var c=0;c<a.size()&&!e;c++){var b=f.element();b=Utility.upToClass(b,"advSearch-RemoveFilterRow");if(a[c].removeRow.identify()==b.identify()){e=a[c]}}e.getElement().remove();a=a.without(e);return a},addAllLine:function(){var a=new AdvancedSearchAllLine(this);
this.allLines.push(a);this.allLineWrapper.insert(a.getElement());a.focus()},addExactLine:function(){var a=new AdvancedSearchExactLine(this);this.exactLines.push(a);this.exactLineWrapper.insert(a.getElement());a.focus()},addAnyLine:function(){var a=new AdvancedSearchAnyLine(this);this.anyLines.push(a);this.anyLineWrapper.insert(a.getElement());a.focus()},addNotAnyLine:function(){var a=new AdvancedSearchNotLine(this);this.notAnyLines.push(a);this.notAnyLineWrapper.insert(a.getElement());a.focus()},addLimiter:function(){var a=new this.AdvancedSearchLimiters(this);this.limiters.push(a);this.limiterWrapper.insert(a.getElement());a.focus()},getLimiterJSON:function(){var result=[];for(var i=0;i<this.limiters.length;i++){switch(this.limiters[i].getType()){case AdvancedSearchController_AS_LIMITER_AR:case AdvancedSearchController_AS_LIMITER_RC:case AdvancedSearchController_AS_LIMITER_LOCATION:var limiterValue=this.limiters[i].getValue();if(limiterValue!=null){result.push(eval(limiterValue))}break;
default:break}}return Object.toJSON(result)},cleanup:function(){this.errorDiv.update("");this.errorDiv.hide()},doUpdate:function(a){var b=this._updateInternal.bind(this);if(a){if(this.typingTimeout){this.typingTimeout.stopTimeout()}this.typingTimeout=new Timeout(AdvancedSearchController_ASL_DEFAULT_TYPING_TIMEOUT,b)}else{b()}},_updateInternal:function(){this.header=this.controller.elementMap.get(AdvancedSearchController_DIV_ADVANCED_SEARCH_QUERY);this.header.update(this.getQueryString(AdvancedSearchController_AS_QUERY_OUTPUT_HIGHLIGHTED))},AdvancedSearchLimiters:Class.create({initialize:function(a){this.advancedSearch=a;this._buildElement();this.inputObject=null},_buildElement:function(){this.element=Builder.node("div",{"class":"advSearch-FilterRow"});this.columnOne=Builder.node("p",{"class":"column column-1"});this.element.insert(this.columnOne);this.type=Builder.node("select",{},this._getSelectableTypes());var c=this.changeType.bindAsEventListener(this);this.columnOne.insert(this.type);
Event.observe(this.type,"change",c);this.setType(AdvancedSearchController_AS_LIMITER_CHOOSE);this.columnTwo=Builder.node("p",{"class":"column column-2"});this.element.insert(this.columnTwo);var b=Builder.node("p",{"class":"column column-3"});this.element.insert(b);this.removeRow=Builder.node("a",{"class":"advSearch-RemoveFilterRow",href:"#",alt:MessageHelper.format("advancedSearchDataValue_removeThisSearchFilter"),title:MessageHelper.format("advancedSearchDataValue_removeThisSearchFilter")},[Builder.node("em",{},MessageHelper.format("advancedSearchDataValue_removeLimiter"))]);b.insert(this.removeRow);b.insert(Builder.node("span",{}," "));this.addRow=Builder.node("a",{"class":"advSearch-AddFilterRow",href:"#",alt:MessageHelper.format("advancedSearchDataValue_addASearchFilter"),title:MessageHelper.format("advancedSearchDataValue_addASearchFilter")},[Builder.node("em",{},MessageHelper.format("advancedSearchDataValue_addLimiter"))]);b.insert(this.addRow);if(this.advancedSearch){var d=this.advancedSearch.addLine.bind(this.advancedSearch,this.getLineType());
Event.observe(this.addRow,"click",d);var a=this.advancedSearch.removeLine.bindAsEventListener(this.advancedSearch,this.getLineType());Event.observe(this.removeRow,"click",a)}},_getSelectableTypes:function(){var a=[];a.push(Builder.node("option",{value:AdvancedSearchController_AS_LIMITER_CHOOSE},MessageHelper.format("advancedSearchDataValue_choose")));if(this.advancedSearch.json_data.useAcceleratedReader&&!this.advancedSearch.hasLimiter(AdvancedSearchController_AS_LIMITER_AR)&&!this.advancedSearch.hasLimiter(AdvancedSearchController_AS_LIMITER_RC)){a.push(Builder.node("option",{value:AdvancedSearchController_AS_LIMITER_AR},MessageHelper.format("advancedSearchDataValue_acceleratedReader")))}if(!this.advancedSearch.hasLimiter(AdvancedSearchController_AS_LIMITER_CALL_NUMBER)){a.push(Builder.node("option",{value:AdvancedSearchController_AS_LIMITER_CALL_NUMBER},MessageHelper.format("advancedSearchDataValue_callNumber")))}if(!this.advancedSearch.hasLimiter(AdvancedSearchController_AS_LIMITER_FORMAT)){a.push(Builder.node("option",{value:AdvancedSearchController_AS_LIMITER_FORMAT},MessageHelper.format("advancedSearchDataValue_format")))
}if(this.advancedSearch.json_data.useFountasAndPinnell==true&&!this.advancedSearch.hasLimiter(AdvancedSearchController_AS_LIMITER_FP)){a.push(Builder.node("option",{value:AdvancedSearchController_AS_LIMITER_FP},MessageHelper.format("advancedSearchDataValue_fountasAndPinnell")))}if(this.advancedSearch.json_data.useInterestAndReadingLevels&&!this.advancedSearch.hasLimiter(AdvancedSearchController_AS_LIMITER_INTEREST)){a.push(Builder.node("option",{value:AdvancedSearchController_AS_LIMITER_INTEREST},MessageHelper.format("advancedSearchDataValue_interestLevel")))}if(this.advancedSearch.json_data.useLexile==true&&!this.advancedSearch.hasLimiter(AdvancedSearchController_AS_LIMITER_LEXILE)){a.push(Builder.node("option",{value:AdvancedSearchController_AS_LIMITER_LEXILE},MessageHelper.format("advancedSearchDataValue_lexile")))}if(this.advancedSearch.json_data.useLocationLimiter==true&&!this.advancedSearch.hasLimiter(AdvancedSearchController_AS_LIMITER_LOCATION)){a.push(Builder.node("option",{value:AdvancedSearchController_AS_LIMITER_LOCATION},MessageHelper.format("advancedSearchDataValue_location")))
}if(this.advancedSearch.json_data.useReadingCounts&&!this.advancedSearch.hasLimiter(AdvancedSearchController_AS_LIMITER_AR)&&!this.advancedSearch.hasLimiter(AdvancedSearchController_AS_LIMITER_RC)){a.push(Builder.node("option",{value:AdvancedSearchController_AS_LIMITER_RC},MessageHelper.format("advancedSearchDataValue_readingCounts")))}if(this.advancedSearch.json_data.useInterestAndReadingLevels&&!this.advancedSearch.hasLimiter(AdvancedSearchController_AS_LIMITER_READING_LEVEL)){a.push(Builder.node("option",{value:AdvancedSearchController_AS_LIMITER_READING_LEVEL},MessageHelper.format("advancedSearchDataValue_readingLevel")))}if(!this.advancedSearch.hasLimiter(AdvancedSearchController_AS_LIMITER_YEAR)){a.push(Builder.node("option",{value:AdvancedSearchController_AS_LIMITER_YEAR},MessageHelper.format("advancedSearchDataValue_year")))}return a},updateTypes:function(){var b=this.getType();this.type.childElements().each(function(e,d){e.remove()});var c=this._getSelectableTypes();for(var a=0;
a<c.length;a++){this.type.appendChild(c[a])}this.setType(b)},hideAddRow:function(){this.addRow.setStyle({visibility:"hidden"})},showAddRow:function(){this.addRow.setStyle({visibility:"visible"})},getElement:function(){return this.element},changeType:function(a){if(this.inputObject){this.inputObject.getElement().remove()}switch(this.getType()){case AdvancedSearchController_AS_LIMITER_LOCATION:this.inputObject=new this.AdvancedSearchLocationLimiter(this);break;case AdvancedSearchController_AS_LIMITER_FORMAT:this.inputObject=new this.AdvancedSearchFormatLimiter(this);break;case AdvancedSearchController_AS_LIMITER_CALL_NUMBER:this.inputObject=new this.AdvancedSearchCallNumberLimiter(this);break;case AdvancedSearchController_AS_LIMITER_YEAR:this.inputObject=new this.AdvancedSearchYearLimiter(this);break;case AdvancedSearchController_AS_LIMITER_AR:this.inputObject=new this.AdvancedSearchReadingProgramLimiter(this,AdvancedSearchController_AS_LIMITER_AR);break;case AdvancedSearchController_AS_LIMITER_FP:this.inputObject=new this.AdvancedSearchFountasPinnellLimiter(this);
break;case AdvancedSearchController_AS_LIMITER_INTEREST:this.inputObject=new this.AdvancedSearchInterestLimiter(this);break;case AdvancedSearchController_AS_LIMITER_LEXILE:this.inputObject=new this.AdvancedSearchLexileLimiter(this);break;case AdvancedSearchController_AS_LIMITER_RC:this.inputObject=new this.AdvancedSearchReadingProgramLimiter(this,AdvancedSearchController_AS_LIMITER_RC);break;case AdvancedSearchController_AS_LIMITER_READING_LEVEL:this.inputObject=new this.AdvancedSearchReadingLevelLimiter(this);break;default:this.inputObject=null;break}if(this.inputObject){this.columnTwo.update(this.inputObject.getElement())}this.fireUpdateEvent(a);this.advancedSearch.refreshDialog()},fireUpdateEvent:function(b){if(this.advancedSearch){var a;if(b&&b.type=="keypress"){a=true}this.advancedSearch.doUpdate(a)}},focus:function(){this.type.focus()},setValue:function(a){if(this.inputObject){this.inputObject.setValue(a)}},getValue:function(){var a="";if(this.inputObject){a=this.inputObject.getValue()
}return a},setType:function(a){if(this.type){this.type.setValue(a)}},setType_TestOnly:function(a){this.setType(a);this.changeType()},getType:function(){if(this.type){return this.type.getValue()}},getQueryString:function(b){var a="";if(b!=AdvancedSearchController_AS_QUERY_OUTPUT_SERVICES&&this.inputObject){a=this.inputObject.getQueryString(b==AdvancedSearchController_AS_QUERY_OUTPUT_HIGHLIGHTED)}return a},getLineType:function(){return AdvancedSearchController_AS_LINE_TYPE_LIMITER},getNumberOfTypeOptions:function(){return this.type.options.length},setTabOrder:function(a){this.type.tabIndex=a++;if(this.inputObject){a=this.inputObject.setTabOrder(a)}return a},AdvancedSearchReadingLevelLimiter:Class.create({initialize:function(a){this.limiters=a;this._buildElement()},_buildElement:function(){this.element=Builder.node("span",{"class":"label"},MessageHelper.format("advancedSearchDataValue_from"));this.textInputFrom=Builder.node("input",{type:"text","class":"advSearch-RangeInput",maxlength:"4"},"");
this.textInputTo=Builder.node("input",{type:"text","class":"advSearch-RangeInput",maxlength:"4"},"");this.element.insert(this.textInputFrom);this.element.insert(Builder.node("span",{"class":"label"},MessageHelper.format("advancedSearchDataValue_to")));this.element.insert(this.textInputTo);if(this.limiters){var a=this.limiters.fireUpdateEvent.bindAsEventListener(this.limiters);Event.observe(this.textInputFrom,"keypress",a);Event.observe(this.textInputTo,"keypress",a)}},getElement:function(){return this.element},getQueryString:function(c){var a="";var b=this.getValue();if(b.from.length>0||b.to.length>0){var d=AdvancedSearchController_DQL_FIELD_READINGLEVEL;if(c){a='<span class="queryProperty">'+d+':[</span><span class="queryValue">'+b.from+'</span><span class="queryBoolean"> TO </span><span class="queryValue">'+b.to+'</span><span class="queryProperty">]</span>'}else{a=d+":["+b.from+" TO "+b.to+"]"}}return a},setValue:function(b,a){this.textInputFrom.value=b;this.textInputTo.value=a},getValue:function(){var from=this.textInputFrom.value;
var to=this.textInputTo.value;if(from.length>0&&to.length==0){to="20.0"}if(from.length==0&&to.length>0){from="0.0"}if(from.length>0&&to.length>0&&Utility.isNumber(from)&&Utility.isNumber(to)&&eval(from.escapeHTML())>eval(to.escapeHTML())){return{from:to.escapeHTML(),to:from.escapeHTML()}}else{return{from:from.escapeHTML(),to:to.escapeHTML()}}},setTabOrder:function(a){this.textInputFrom.tabIndex=a++;this.textInputTo.tabIndex=a++;return a}}),AdvancedSearchLocationLimiter:Class.create({initialize:function(a){this.limiters=a;this._buildElement()},_buildElement:function(){var f=this.limiters.advancedSearch.json_data.locations;var a=[];var e=$H(this.limiters.advancedSearch.json_data.locations[0]).keys()[0];for(var d=0;d<f.length;d++){var c=$H(this.limiters.advancedSearch.json_data.locations[d]);var b=c.keys()[0];a.push(Builder.node("option",{value:b},c.get(b)))}this.selectBox=Builder.node("select",{},a);this.selectBox.setValue(e);this.element=Builder.node("span",{},this.selectBox)},getElement:function(){return this.element
},getQueryString:function(b){var a="";return a},setValue:function(a){this.selectBox.setValue(a)},getValue:function(){return{type:AdvancedSearchController_AS_LIMITER_LOCATION,siteTypeID:this.selectBox.getValue()}},setTabOrder:function(a){this.selectBox.tabIndex=a++;return a}}),AdvancedSearchFormatLimiter:Class.create({initialize:function(a){this.limiters=a;this.isIntegrated=this.limiters.advancedSearch.json_data.isIntegratedShelf;this._buildElement()},_buildElement:function(){var j=[];var c=this.limiters.advancedSearch.json_data.materialTypes;j.push(Builder.node("option",{value:"-1"},MessageHelper.format("advancedSearchDataValue_anyFormat")));for(var e=0;e<c.length;e++){var f=$H(this.limiters.advancedSearch.json_data.materialTypes[e]);var g=f.keys()[0];j.push(Builder.node("option",{value:g},f.get(g)))}this.selectBox=Builder.node("select",{},j);this.selectBox.setValue("-1");if(this.isIntegrated=="1"){this.checkboxOnlyFolletteBook=Builder.node("input",{type:"checkbox",name:"searchOnlyFolletteBook",id:"searchOnlyFolletteBook",style:"width:12px",value:"yes"});
var d=Builder.node("div",{id:"searchOnlyFolletEbookID",style:"display:none","class":"label"},[Builder.node("div",{},[this.checkboxOnlyFolletteBook,MessageHelper.format("advancedSearchDataValue_limitToFolletteBooks")])])}if(this.isIntegrated=="1"){var h=[];h.push(Builder.node("div",{},this.selectBox));h.push(d);this.element=Builder.node("div",{},h)}else{this.element=Builder.node("div",{},Builder.node("div",{},this.selectBox))}if(this.limiters){var a=this.limiters.fireUpdateEvent.bindAsEventListener(this.limiters);Event.observe(this.selectBox,"change",a);if(this.isIntegrated=="1"){Event.observe(this.checkboxOnlyFolletteBook,"click",a);Event.observe(this.selectBox,"change",function b(){if(this.getValue()=="ebook"){d.show()}else{d.hide()}})}}},getElement:function(){return this.element},getQueryString:function(b){var a="";if(this.getValue()!="-1"){var c=AdvancedSearchController_DQL_FIELD_FORMAT;if(b){a='<span class="queryProperty">'+c+':</span> <span class="queryValue">'+this.getValue()+"</span>";
if(this.getValue()=="ebook"&&this.isIntegrated=="1"&&this.checkboxOnlyFolletteBook.checked){a+='<span class="queryValue"> '+AdvancedSearchController_FIELD_FORMAT_LIMIT_TO_FOLLETT_EBOOKS+"</span>"}}else{a=c+":"+this.getValue();if(this.getValue()=="ebook"&&this.isIntegrated=="1"&&this.checkboxOnlyFolletteBook.checked){a+=" "+AdvancedSearchController_FIELD_FORMAT_LIMIT_TO_FOLLETT_EBOOKS}}}return a},setValue:function(a){this.selectBox.selectedIndex=a},getValue:function(){return this.selectBox.getValue()},setTabOrder:function(a){this.selectBox.tabIndex=a++;if(this.getValue()=="ebook"&&this.isIntegrated=="1"){this.checkboxOnlyFolletteBook.tabIndex=a++}return a}}),AdvancedSearchFountasPinnellLimiter:Class.create({initialize:function(a){this.limiters=a;this._buildElement()},_buildElement:function(){var b=this.limiters.advancedSearch.json_data.fountasPinnellValues;var f=$H(this.limiters.advancedSearch.json_data.fountasPinnellValues[0]).keys()[0];var a=[];var g=[];var e;for(var d=0;d<b.length;d++){var c=$H(this.limiters.advancedSearch.json_data.fountasPinnellValues[d]);
e=c.keys()[0];a.push(Builder.node("option",{value:e},c.get(e)));g.push(Builder.node("option",{value:e},c.get(e)))}this.selectBoxFrom=Builder.node("select",{},a);this.selectBoxFrom.setValue(f);this.selectBoxTo=Builder.node("select",{},g);this.selectBoxTo.setValue(e);this.element=Builder.node("span",{"class":"label"},MessageHelper.format("advancedSearchDataValue_from"));this.element.insert(this.selectBoxFrom);this.element.insert(Builder.node("span",{"class":"label"},MessageHelper.format("advancedSearchDataValue_to")));this.element.insert(this.selectBoxTo);if(this.limiters){var h=this.limiters.fireUpdateEvent.bindAsEventListener(this.limiters);Event.observe(this.selectBoxFrom,"change",h);Event.observe(this.selectBoxTo,"change",h)}},getElement:function(){return this.element},getQueryString:function(c){var a="";var b=this.getValue();if(b.from.length>0||b.to.length>0){var d=AdvancedSearchController_DQL_FIELD_FOUNTASPINNELL;if(c){a='<span class="queryProperty">'+d+':[</span><span class="queryValue">'+b.from+'</span><span class="queryBoolean"> TO </span><span class="queryValue">'+b.to+'</span><span class="queryProperty">]</span>'
}else{a=d+":["+b.from+" "+this.limiters.advancedSearch.json_data.toNoColon_string+" "+b.to+"]"}}return a},setValue:function(b,a){this.selectBoxFrom.setValue(b);this.selectBoxTo.setValue(a)},getValue:function(){if(this.selectBoxFrom.selectedIndex>this.selectBoxTo.selectedIndex){return{from:this.selectBoxTo.getValue(),to:this.selectBoxFrom.getValue()}}else{return{from:this.selectBoxFrom.getValue(),to:this.selectBoxTo.getValue()}}},setTabOrder:function(a){this.selectBoxFrom.tabIndex=a++;this.selectBoxTo.tabIndex=a++;return a}}),AdvancedSearchInterestLimiter:Class.create({initialize:function(a){this.limiters=a;this._buildElement()},_buildElement:function(){var h=this.limiters.advancedSearch.json_data.interestLevels;var a=[];var f=[];var e=$H(this.limiters.advancedSearch.json_data.interestLevels[0]).keys()[0];for(var d=0;d<h.length;d++){var c=$H(this.limiters.advancedSearch.json_data.interestLevels[d]);var b=c.keys()[0];a.push(Builder.node("option",{value:b},c.get(b)));f.push(Builder.node("option",{value:b},c.get(b)))
}this.selectBoxFrom=Builder.node("select",{},a);this.selectBoxFrom.setValue(e);this.selectBoxTo=Builder.node("select",{},f);this.selectBoxTo.setValue(b);this.element=Builder.node("span",{"class":"label"},MessageHelper.format("advancedSearchDataValue_from"));this.element.insert(this.selectBoxFrom);this.element.insert(Builder.node("span",{"class":"label"},MessageHelper.format("advancedSearchDataValue_to")));this.element.insert(this.selectBoxTo);if(this.limiters){var g=this.limiters.fireUpdateEvent.bindAsEventListener(this.limiters);Event.observe(this.selectBoxFrom,"change",g);Event.observe(this.selectBoxTo,"change",g)}},getElement:function(){return this.element},setValue:function(b,a){this.selectBoxFrom.setValue(b);this.selectBoxTo.setValue(a)},getQueryString:function(c){var a="";var b=this.getValue();if(b.from.length>0||b.to.length>0){var d=AdvancedSearchController_DQL_FIELD_INTERESTLEVEL;if(c){a='<span class="queryProperty">'+d+':[</span><span class="queryValue">'+b.from+'</span><span class="queryBoolean"> TO </span><span class="queryValue">'+b.to+'</span><span class="queryProperty">]</span>'
}else{a=d+":["+b.from+" "+this.limiters.advancedSearch.json_data.toNoColon_string+" "+b.to+"]"}}return a},getValue:function(){if(this.selectBoxFrom.selectedIndex>this.selectBoxTo.selectedIndex){return{from:this.selectBoxTo.getValue(),to:this.selectBoxFrom.getValue()}}else{return{from:this.selectBoxFrom.getValue(),to:this.selectBoxTo.getValue()}}},setTabOrder:function(a){this.selectBoxFrom.tabIndex=a++;this.selectBoxTo.tabIndex=a++;return a}}),AdvancedSearchYearLimiter:Class.create({initialize:function(a){this.limiters=a;this._buildElement()},_buildElement:function(){this.element=Builder.node("span",{"class":"label"},MessageHelper.format("advancedSearchDataValue_yearColon"));this.textInput=Builder.node("input",{"class":"advSearch-RangeInput",maxlength:"4"});this.element.insert(this.textInput);this.radio1=Builder.node("input",{"class":"advSearch-RadioInput",type:"radio",value:AdvancedSearchController_DQL_FIELD_PUBYEAR,name:"AdvYearRadioGroup",checked:"checked"});this.radio2=Builder.node("input",{"class":"advSearch-RadioInput",type:"radio",value:AdvancedSearchController_DQL_FIELD_BEFORE,name:"AdvYearRadioGroup"});
this.radio3=Builder.node("input",{"class":"advSearch-RadioInput",type:"radio",value:AdvancedSearchController_DQL_FIELD_AFTER,name:"AdvYearRadioGroup"});this.element.insert(Builder.node("label",{},[this.radio1,MessageHelper.format("advancedSearchDataValue_during")]));this.element.insert(Builder.node("label",{},[this.radio2,MessageHelper.format("advancedSearchDataValue_before")]));this.element.insert(Builder.node("label",{},[this.radio3,MessageHelper.format("advancedSearchDataValue_after")]));if(this.limiters){var a=this.limiters.fireUpdateEvent.bindAsEventListener(this.limiters);Event.observe(this.radio1,"click",a);Event.observe(this.radio2,"click",a);Event.observe(this.radio3,"click",a);Event.observe(this.textInput,"keypress",a)}},getElement:function(){return this.element},getQueryString:function(b){var a="";if(this.getValue().year.length>0){if(b){a='<span class="queryProperty">'+this.getValue().option+':</span> <span class="queryValue">'+this.getValue().year+"</span>"}else{a=this.getValue().option+":"+this.getValue().year
}}return a},setValue:function(b,a){switch(a){case 1:this.radio1.checked=true;this.radio2.checked=false;this.radio3.checked=false;break;case 2:this.radio1.checked=false;this.radio2.checked=true;this.radio3.checked=false;break;case 3:this.radio1.checked=false;this.radio2.checked=false;this.radio3.checked=true;break;default:break}this.textInput.setValue(b)},getValue:function(){var a="";if(this.radio1.checked){a=this.radio1.value}if(this.radio2.checked){a=this.radio2.value}if(this.radio3.checked){a=this.radio3.value}return{year:this.textInput.getValue().escapeHTML(),option:a}},setTabOrder:function(a){this.textInput.tabIndex=a++;this.radio1.tabIndex=a++;this.radio2.tabIndex=a++;this.radio3.tabIndex=a++;return a}}),AdvancedSearchLexileLimiter:Class.create({initialize:function(a){this.limiters=a;this._buildElement()},_buildElement:function(){var a=this.limiters.advancedSearch.json_data.lexileCodes;var b=[];var f=$H(this.limiters.advancedSearch.json_data.lexileCodes[0]).keys()[0];for(var e=0;e<a.length;
e++){var d=$H(this.limiters.advancedSearch.json_data.lexileCodes[e]);var c=d.keys()[0];b.push(Builder.node("option",{value:c},d.get(c)))}this.selectBox=Builder.node("select",{},b);this.selectBox.setValue(f);this.inputFrom=Builder.node("input",{"class":"advSearch-RangeInput",maxlength:"5"});this.inputTo=Builder.node("input",{"class":"advSearch-RangeInput",maxlength:"5"});this.element=Builder.node("div",{},[Builder.node("div",{},[Builder.node("span",{"class":"label"},MessageHelper.format("advancedSearchDataValue_from")),this.inputFrom,Builder.node("span",{"class":"label"},MessageHelper.format("advancedSearchDataValue_to")),this.inputTo]),Builder.node("div",{},this.selectBox)]);if(this.limiters){var g=this.limiters.fireUpdateEvent.bindAsEventListener(this.limiters);Event.observe(this.selectBox,"change",g);Event.observe(this.inputFrom,"keypress",g);Event.observe(this.inputTo,"keypress",g)}},getElement:function(){return this.element},getQueryString:function(c){var a="";var b=this.getValue();
if(b.code!=0){var d=AdvancedSearchController_DQL_FIELD_LEXILECODE;if(c){a+='<span class="queryProperty">'+d+':</span><span class="queryValue">'+b.code+"</span>"}else{a+=d+":"+b.code}}if(b.from.length>0&&b.to.length>0){var d=AdvancedSearchController_DQL_FIELD_LEXILEMEASURE;if(c){a+='<span class="queryProperty">'+d+':[</span><span class="queryValue">'+b.from+'</span><span class="queryBoolean"> TO </span><span class="queryValue">'+b.to+'</span><span class="queryProperty">]</span>'}else{a+=d+":["+b.from+" TO "+b.to+"]"}}return a},setValue:function(c,b,a){this.inputFrom.value=c;this.inputTo.value=b;this.selectBox.selectedIndex=a},getValue:function(){var from=this.inputFrom.value;var to=this.inputTo.value;if(from.length>0&&to.length==0){to="9999"}if(from.length==0&&to.length>0){from="0"}if(from.length>0&&to.length>0&&Utility.isNumber(from)&&Utility.isNumber(to)&&eval(from.escapeHTML())>eval(to.escapeHTML())){return{from:to.escapeHTML(),to:from.escapeHTML(),code:this.selectBox.getValue()}}return{from:from.escapeHTML(),to:to.escapeHTML(),code:this.selectBox.getValue()}
},setTabOrder:function(a){this.inputFrom.tabIndex=a++;this.inputTo.tabIndex=a++;this.selectBox.tabIndex=a++;return a}}),AdvancedSearchCallNumberLimiter:Class.create({initialize:function(a){this.limiters=a;this._buildElement()},_buildElement:function(){this.inputFrom=Builder.node("input",{"class":"advSearch-RangeInput"});this.inputTo=Builder.node("input",{"class":"advSearch-RangeInput"});this.element=Builder.node("div",{},[Builder.node("div",{},[Builder.node("span",{"class":"label"},MessageHelper.format("advancedSearchDataValue_from")),this.inputFrom,Builder.node("span",{"class":"label"},MessageHelper.format("advancedSearchDataValue_to")),this.inputTo])]);if(this.limiters){var a=this.limiters.fireUpdateEvent.bindAsEventListener(this.limiters);Event.observe(this.inputFrom,"keypress",a);Event.observe(this.inputTo,"keypress",a)}},getElement:function(){return this.element},getQueryString:function(c){var a="";var b=this.getValue();if(b.from.length>0&&b.to.length>0){var d=AdvancedSearchController_DQL_FIELD_CALLNUMBER;
if(c){a+='<span class="queryProperty">'+d+':[</span><span class="queryValue">'+b.from+'</span><span class="queryBoolean"> TO </span><span class="queryValue">'+b.to+'</span><span class="queryProperty">]</span>'}else{a+=d+":["+b.from+" TO "+b.to+"]"}}return a},setValue:function(b,a){this.inputFrom.value=b;this.inputTo.value=a},getValue:function(){var from=this.inputFrom.value;var to=this.inputTo.value;if(from.length>0&&to.length==0){to="[ANY]"}if(from.length==0&&to.length>0){from="[ANY]"}if(from.length>0&&to.length>0&&Utility.isNumber(from)&&Utility.isNumber(to)&&eval(from.escapeHTML())>eval(to.escapeHTML())){return{from:to.escapeHTML(),to:from.escapeHTML()}}return{from:from.escapeHTML(),to:to.escapeHTML()}},setTabOrder:function(a){this.inputFrom.tabIndex=a++;this.inputTo.tabIndex=a++;return a}}),AdvancedSearchReadingProgramLimiter:Class.create({initialize:function(b,a){this.limiters=b;this._buildElement();this.type=a},_buildElement:function(){this.levelFrom=Builder.node("input",{"class":"advSearch-RangeInput",maxlength:"5",value:this.limiters.advancedSearch.json_data.zero_string});
this.levelTo=Builder.node("input",{"class":"advSearch-RangeInput",maxlength:"5",value:this.limiters.advancedSearch.json_data.twenty_string});this.pointFrom=Builder.node("input",{"class":"advSearch-RangeInput",maxlength:"5",value:this.limiters.advancedSearch.json_data.zero_string});this.pointTo=Builder.node("input",{"class":"advSearch-RangeInput",maxlength:"5",value:this.limiters.advancedSearch.json_data.onethirty_string});this.element=Builder.node("div",{},[Builder.node("div",{},[Builder.node("span",{"class":"label"},MessageHelper.format("advancedSearchDataValue_levelFrom")),this.levelFrom,Builder.node("span",{"class":"label"},MessageHelper.format("advancedSearchDataValue_to")),this.levelTo]),Builder.node("div",{},[Builder.node("span",{"class":"label"},MessageHelper.format("advancedSearchDataValue_pointValueFrom")),this.pointFrom,Builder.node("span",{"class":"label"},MessageHelper.format("advancedSearchDataValue_to")),this.pointTo]),])},getElement:function(){return this.element},getQueryString:function(b){var a="";
return a},setValue:function(b,a,e,d,c){this.pointFrom.value=b;this.pointTo.value=a;this.levelFrom.value=e;this.levelTo.value=d;this.type=c},getValue:function(){var a=null;if((!this.pointFrom.getValue().empty()&&!this.pointTo.getValue().empty())||(!this.levelFrom.getValue().empty()&&!this.levelTo.getValue().empty())){a={type:this.type,points:{from:this.pointFrom.getValue().escapeHTML(),to:this.pointTo.getValue().escapeHTML()},level:{from:this.levelFrom.getValue().escapeHTML(),to:this.levelTo.getValue().escapeHTML()}}}return a},setTabOrder:function(a){this.levelFrom.tabIndex=a++;this.levelTo.tabIndex=a++;this.pointFrom.tabIndex=a++;this.pointTo.tabIndex=a++;return a}})})});