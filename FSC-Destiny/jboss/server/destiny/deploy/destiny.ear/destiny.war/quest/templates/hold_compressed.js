Class.create(BaseController,{init:function(){this.modal.show();this.bibID=this.data.bibID;if(this.bibID){this.elementMap.get(HoldController_SPAN_ADD_HOLD_TITLE).addClassName(HoldController_CLASS_ADD_HOLD_TITLE)}},registerEvents:function(){Event.observe(this.elementMap.get(HoldController_BUTTON_ADD_HOLD_CLOSE),"mousedown",this.closeDialog.bind(this));Event.observe(this.elementMap.get(HoldController_BUTTON_ADD_HOLD_CLOSE_BOTTOM),"mousedown",this.closeDialog.bind(this));Event.observe(this.elementMap.get(HoldController_BUTTON_ADD_HOLD_SAVE),"click",this.addHold.bind(this));Event.observe(this.elementMap.get(HoldController_FIELD_HOLD_QUANTITY),"keyup",this.forceNumeric.bind(this))},populateErrors:function(b){var a=ReusableTemplates.load("GenericListTemplate",{list:b});this.elementMap.get(HoldController_DIV_ADD_HOLD_ERRORS).update(a);this.elementMap.get(HoldController_DIV_ADD_HOLD_ERRORS).show();this.elementMap.get(HoldController_BUTTON_ADD_HOLD_SAVE).disabled=false;this.elementMap.get(HoldController_BUTTON_ADD_HOLD_SAVE).blur()
},populateHoldMessage:function(b){var a=ReusableTemplates.load("GenericListTemplate",{list:b});this.elementMap.get(HoldController_DIV_ADD_HOLD_CLOSE_AREA).show();this.elementMap.get(HoldController_DIV_ADD_HOLD_MESSAGE).show(a);this.elementMap.get(HoldController_DIV_ADD_HOLD_MESSAGE).update(a);this.elementMap.get(HoldController_DIV_ADD_HOLD_ERRORS).hide();this.elementMap.get(HoldController_DIV_ADD_HOLD_QUANTITY).hide();this.elementMap.get(HoldController_DIV_ADD_HOLD_SAVE_AREA).hide()},addHold:function(b){this.elementMap.get(HoldController_BUTTON_ADD_HOLD_SAVE).disabled=true;var c=this.elementMap.get(HoldController_FIELD_HOLD_QUANTITY).getValue();var a=false;a=DAO.load({endpoint:"HoldController.HoldGranter",container:null,method:"post"},this.bibID,c);if(!a){this.elementMap.get(HoldController_BUTTON_ADD_HOLD_SAVE).disabled=false}},closeDialog:function(a){this.modal.closeDialog()},forceNumeric:function(e){var d=this.elementMap.get(HoldController_FIELD_HOLD_QUANTITY);var f=d.getValue();var b="";
for(var c=0;c<f.length;c++){var a=f.substr(c,1);if(a>="0"&&a<="9"){b=b+a}}d.setValue(b)}});