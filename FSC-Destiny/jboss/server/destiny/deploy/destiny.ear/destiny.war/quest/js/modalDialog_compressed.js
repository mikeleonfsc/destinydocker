Class.create({initialize:function(optionArray){this.options=optionArray;this.visible=false;this.backgroundDiv=new Element("div",{id:this.options.id+"_background"});var alternateContent=$(this.options.alternateContentDiv);if(alternateContent){this.contentDiv=alternateContent;this.contentExists=true}else{this.contentDiv=new Element("div",{id:this.options.id,style:"display: none"});this.contentExists=false}this.backgroundDiv.setStyle({position:"absolute",top:"0px",left:"0px",width:"100%",zIndex:this.options.zIndex,backgroundColor:"black",filter:"alpha(opacity=60)",MozOpacity:0.6,opacity:0.6,display:"none"});if(this.options.height&&this.options.height.length>0){this.contentDiv.setStyle({height:this.options.height+(Object.isNumber(this.options.height)?"px":"")})}if(this.options.width&&this.options.width.length>0){this.contentDiv.setStyle({width:this.options.width+(Object.isNumber(this.options.width)?"px":"")})}if(this.options.border&&this.options.border.length>0){this.contentDiv.setStyle({border:this.options.border})
}if(this.options.backgroundColor){this.contentDiv.setStyle({backgroundColor:this.options.backgroundColor})}var position="fixed";if(Utility.getIEVersion()==6){position="absolute"}this.contentDiv.setStyle({zIndex:(eval(this.options.zIndex)+1),position:position,top:"50%",left:"50%",margin:"0px 0px 0px 0px"});this.addDivsToDOM();this.showLoading()},showLoading:function(){this.contentDiv.update(new Element("img",{src:"/images/icons/general/spacer.gif","class":"loading"}));this.show()},addDivsToDOM:function(a){$(document.body).insert(this.backgroundDiv);if(this.contentExists){this.contentDiv=this.contentDiv.remove()}$(document.body).insert(this.contentDiv);this.contentDiv.setStyle({opacity:"1.0"});if(this.options.hideOnOutsideClick){var b=this.closeDialog.bindAsEventListener(this);Event.observe(this.backgroundDiv.identify(),"click",b)}},centerDialog:function(){if(this.visible){var e=this.contentDiv.getWidth();var c=this.contentDiv.getHeight();var b=document.viewport.getScrollOffsets().top;if(Utility.getIEVersion()!=6){b=0
}var a=document.viewport.getHeight();var d=document.viewport.getWidth();var f=(-c/2)+b;if(a<c){f=-(a/2)}this.contentDiv.setStyle({marginTop:f+"px",marginLeft:(-e/2)+"px"})}},setOverlayStyle:function(){var b;if(window.innerHeight&&window.scrollMaxY){b=window.innerHeight+window.scrollMaxY}else{if(document.body.scrollHeight>document.body.offsetHeight){b=document.body.scrollHeight}else{b=document.body.offsetHeight}}var a;if(self.innerHeight){a=self.innerHeight}else{if(document.documentElement&&document.documentElement.clientHeight){a=document.documentElement.clientHeight}else{if(document.body){a=document.body.clientHeight}}}var c=b;if(b<a){c=a}this.backgroundDiv.setStyle({height:c+"px"})},update:function(a){this.contentDiv.update(a);this.show()},show:function(){this.visible=true;this.setOverlayStyle();this.centerDialog();this.backgroundDiv.show();this.contentDiv.show()},hide:function(){this.backgroundDiv.hide();this.contentDiv.hide();this.visible=false},reset:function(){this.contentDiv.firstDescendant().setStyle({height:null,width:null,marginLeft:null});
var a=$("messageDivForModalDialog");if(a){a.remove()}var b=Utility.downToClass(this.contentDiv,"classModalDialogShrinkyToHide");if(b){b.removeAttribute("style");b.show()}},animatedSubmit:function(l,f){var i=this.contentDiv.firstDescendant();var e=f||0.8;var c=i.getWidth()/2;var d=i.getHeight()/2;var h=c/2;var b='<div id="messageDivForModalDialog" style="display: none" class="classShrinkyMessage" ></div>';var g=Utility.downToClass(this.contentDiv,"classModalDialogShrinkyToHide");if(g){g.insert({before:b});var j=g.getWidth()/2;var a=g.getHeight()/2;$("messageDivForModalDialog").setStyle({height:g.getHeight()+"px",width:g.getWidth()+"px"});$("messageDivForModalDialog").update(l);g.hide();$("messageDivForModalDialog").show();if(Utility.getIEVersion()>-1){h=0}new Effect.Morph($("messageDivForModalDialog"),{style:{height:"40px",padding:"1px 1px 15px 1px"},duration:0.5});var k=this.animatedHide.bind(this,this.contentDiv,e);k.delay(e)}},animatedHide:function(a,c){if(Object.isElement(a)&&a.visible()){if(this.visible){var b=this;
new Effect.Fade(a,{duration:0.5,afterFinish:function(){b.closeDialog()}})}else{this.closeDialog()}}},closeDialog:function(){this.hide();this.contentDiv.fire("modal:close");this.contentDiv.remove();this.backgroundDiv.remove()}});